const cloudchewieFn={day_night_count:0,isReadMode:!1,saveData:function(e,t){localStorage.setItem(e,JSON.stringify({time:Date.now(),data:t}))},removeData:function(e){localStorage.removeItem(e)},loadData:function(e,t){let n=JSON.parse(localStorage.getItem(e));if(n){let e=Date.now()-n.time;if(e<60*t*1e3&&e>-1)return n.data}return n?n.data:void 0},setCookie:(e,t,n=365)=>{var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toGMTString();document.cookie=e+"="+t+"; "+i},delCookie:e=>{var t=new Date;t.setTime(t.getTime()-1);var n=getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},getCookie:e=>{for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var i=n[o].trim();if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},isHome:function(){return"/"==window.location.pathname},isMusic:function(){return"/music/"==window.location.pathname},isNowtime:function(){return"/nowtime/"==window.location.pathname},isGuestbook:function(){return"/guestbook/"==window.location.pathname},isFullScreen:()=>{var e=document.fullScreen||null!==document.fullscreenElement;return void 0===e&&(e=!1),e},addScript:(e,t,n)=>{if(document.getElementById(e))return n?n():void 0;let o=document.createElement("script");o.src=t,o.id=e,n&&(o.onload=n),document.head.appendChild(o)},copy:function(e,t){var n=new ClipboardJS(e,{text:function(e){return t}});n.on("success",(function(e){e.clearSelection()})),n.on("error",(function(e){}))},copySelect:()=>{document.execCommand("Copy",!1,null),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)},insertAtCursor:(e,t)=>{if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=t,sel.select();else if(e.selectionStart||"0"==e.selectionStart){var n=e.selectionStart,o=e.selectionEnd,i=e.scrollTop;e.value=e.value.substring(0,n)+t+e.value.substring(o,e.value.length),i>0&&(e.scrollTop=i),e.focus(),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}else e.value+=t,e.focus()},goToPage:()=>{let e=document.querySelector("#textnumer");e&&(e.addEventListener("input",(()=>{let t=document.querySelectorAll(".page-number"),n=t[t.length-1].innerHTML;Number(e.value)>n&&(e.value=n)})),e.addEventListener("keyup",(t=>{"Enter"==t.key&&""!=e.value&&"0"!=e.value&&pjax.loadUrl("1"==e.value?"/":`/page/${e.value}/`)})))},debounce:function(e,t,n){let o;return function(){const i=this,c=arguments,a=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||e.apply(i,c)}),t),a&&e.apply(i,c)}},throttle:function(e,t,n){let o,i,c,a=0;n||(n={});const l=function(){a=!1===n.leading?0:(new Date).getTime(),o=null,e.apply(i,c),o||(i=c=null)};return function(){const s=(new Date).getTime();a||!1!==n.leading||(a=s);const d=t-(s-a);i=this,c=arguments,d<=0||d>t?(o&&(clearTimeout(o),o=null),a=s,e.apply(i,c),o||(i=c=null)):o||!1===n.trailing||(o=setTimeout(l,d))}},fadeIn:(e,t)=>{e.style.cssText=`display:block;animation: to_show ${t}s`},fadeOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.cssText="display: none; animation: '' ",e.removeEventListener("animationend",t)})),e.style.animation=`to_hide ${t}s`},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)})),e.style.animation=t},sidebarPaddingR:()=>{const e=window.innerWidth,t=document.body.clientWidth,n=e-t;e!==t&&(document.body.style.paddingRight=n+"px")},snackbarShow:(e,t=!1,n=2e3)=>{const{position:o,bgLight:i,bgDark:c}=GLOBAL_CONFIG.Snackbar,a="light"===document.documentElement.getAttribute("data-theme")?i:c;Snackbar.show({text:e,backgroundColor:a,showAction:t,duration:n,pos:o,customClass:"snackbar-css"})},snackbarShowLong:(e,t=!1,n=1e4)=>{const{position:o,bgLight:i,bgDark:c}=GLOBAL_CONFIG.Snackbar,a="light"===document.documentElement.getAttribute("data-theme")?i:c;Snackbar.show({text:e,backgroundColor:a,showAction:t,duration:n,pos:o,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const n=new Date,o=new Date(e),i=n.getTime()-o.getTime(),c=36e5,a=24*c;let l;if(t){const e=i/2592e6,t=i/a,n=i/c,s=i/6e4;l=e>12?o.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.month:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.day:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.hour:s>=1?parseInt(s)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else l=parseInt(i/a);return l},loadComment:(e,t)=>{if("IntersectionObserver"in window){const n=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),n.disconnect())}),{threshold:[0]});n.observe(e)}else t()},scrollToDest:(e,t=500)=>{const n=window.scrollY;if(n>e&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});let o=null;e=+e,window.requestAnimationFrame((function i(c){o=o||c;const a=c-o;n<e?window.scrollTo(0,(e-n)*a/t+n):window.scrollTo(0,n-(n-e)*a/t),a<t?window.requestAnimationFrame(i):window.scrollTo(0,e)}))},scrollToTop:()=>{cloudchewieFn.scrollToDest(0,500)},scrollToBottom:()=>{cloudchewieFn.scrollToDest(document.body.scrollHeight,500)},getParents:(e,t)=>{for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},siblings:(e,t)=>[...e.parentNode.children].filter((n=>t?n!==e&&n.matches(t):n!==e)),wrap:(e,t,n)=>{const o=document.createElement(t);for(const[e,t]of Object.entries(n))o.setAttribute(e,t);e.parentNode.insertBefore(o,e),o.appendChild(e)},unwrap:e=>{const t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,n=e.offsetParent;for(;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if("mediumZoom"===t){const t=mediumZoom(e);t.on("open",(e=>{const n="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";t.update({background:n})}))}"fancybox"===t&&(e.forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,n=e.title||e.alt||"";cloudchewieFn.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":n,"data-thumb":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1}}),window.fancyboxRun=!0))},initJustifiedGallery:function(e){e.forEach((function(e){cloudchewieFn.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getStyle:(e,t)=>window.getComputedStyle?getComputedStyle(e,null)[t]:e.currentStyle[t],resizeTop:()=>{var e=(null!=document.getElementById("content-inner")?document.getElementById("content-inner").clientWidth:0)-Number(cloudchewieFn.getStyle(document.getElementById("content-inner"),"paddingLeft").replace(/\s+|px/gi,""))-Number(cloudchewieFn.getStyle(document.getElementById("content-inner"),"paddingRight").replace(/\s+|px/gi,""));try{document.getElementById("top").setAttribute("style","width:"+e.toString()+"px")}catch(e){}},fixNav:()=>{if("true"==cloudchewieFn.loadData("enableFixedNav")){$("#name-container").show();var e=$(window).scrollTop();$(window).scroll((function(){if("true"==cloudchewieFn.loadData("enableFixedNav")&&"Cloudchewie"!=document.title.split(" | Cloudchewie")[0]){var t=$(window).scrollTop();t>e?$("#page-header").addClass("nav-down"):$("#page-header").removeClass("nav-down"),e=t}})),document.getElementById("page-name").innerText=document.title.split(" | Cloudchewie")[0]}else $("#name-container").hide()},isInViewPortOfOne:e=>{if(null==e)return!1;if("none"==window.getComputedStyle(e).getPropertyValue("display"))return!1;const t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return e.offsetTop-document.documentElement.scrollTop<=t},alertTooLow:()=>{void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.browser_version_low)},browserVersion:()=>{var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=(e.indexOf("Trident")>-1&&e.indexOf("rv:11.0"),e.indexOf("Edge")>-1&&!t),o=e.indexOf("Firefox")>-1,i=e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,c=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1&&-1==e.indexOf("Edge")&&-1==e.indexOf("OPR");e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome")&&-1==e.indexOf("Edge")&&e.indexOf("OPR");n?e.split("Edge/")[1].split(".")[0]<90&&cloudchewieFn.alertTooLow():o?e.split("Firefox/")[1].split(".")[0]<90&&cloudchewieFn.alertTooLow():i?e.split("OPR/")[1].split(".")[0]<80&&cloudchewieFn.alertTooLow():c&&e.split("Chrome/")[1].split(".")[0]<90&&cloudchewieFn.alertTooLow()},checkVersion:()=>{1!=cloudchewieFn.getCookie("browser_version_checked")&&(cloudchewieFn.browserVersion(),cloudchewieFn.setCookie("browser_version_checked",!0,1))},bindContextMenu:(e,t)=>{e&&document.body.clientWidth>900?(t&&cloudchewieFn.snackbarShow("已启用自定义右键菜单,可使用Ctrl+右键单击呼出默认右键菜单"),window.oncontextmenu=function(e){if(e.ctrlKey||document.body.clientWidth<900)return!0;document.querySelectorAll(".rightMenu-line").forEach((e=>{$(e).hide()})),document.getSelection().toString()&&$("#menu-text").show(),document.getElementById("post")&&($("#menu-post").show(),$("#menu-other").show()),$("#menu-global").show();var t=window.document.body;"A"==(t=e.target).tagName&&($("#menu-to").show(),cloudchewieFn.open=function(){location.href=t.href},cloudchewieFn.openWithNewTab=function(){window.open(t.href)},cloudchewieFn.copyLink=function(){let e=t.href,n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),document.body.removeChild(n),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)}),"IMG"==t.tagName?($("#menu-img").show(),cloudchewieFn.openWithNewTab=function(){window.open(t.src)},cloudchewieFn.downloadImage=function(){t.click()},cloudchewieFn.click=function(){t.click()},cloudchewieFn.copyLink=function(){let e=t.src,n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),document.body.removeChild(n),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)}):"TEXTAREA"!=t.tagName&&"INPUT"!=t.tagName||($("#menu-paste").show(),cloudchewieFn.paste=function(){navigator.permissions.query({name:"clipboard-read"}).then((e=>{"granted"==e.state||"prompt"==e.state?navigator.clipboard.readText().then((e=>{cloudchewieFn.insertAtCursor(t,e)})):alert("请允许读取剪贴板！")}))});let n=e.clientX+10,o=e.clientY,i=$("#rightMenu").width(),c=$("#rightMenu").height();n+i>window.innerWidth&&(n-=i+10),o+c>window.innerHeight&&(o-=o+c-window.innerHeight);var a=!0;return document.querySelectorAll(".rightMenu-line").forEach((e=>{"none"!=$(e).css("display")&&(a=!1)})),a&&$("#menu-general").show(),cloudchewieFn.isReadMode&&document.querySelectorAll(".rightMenu-line").forEach((e=>{$(e).hide()})),cloudchewieFn.toggleRightMenu(!0,o,n),!1},window.addEventListener("click",(function(){cloudchewieFn.toggleRightMenu(!1)}))):window.oncontextmenu=function(){return!0}},toggleRightMenu:(e,t=0,n=0)=>{let o=$("#rightMenu");o.css("top",t+"px").css("left",n+"px"),e?o.show():o.hide()},addLongtabListener:(e,t)=>{let n=0;e.ontouchstart=()=>{n=0,n=setTimeout((()=>{t(),n=0}),380)},e.ontouchmove=()=>{clearTimeout(n),n=0},e.ontouchend=()=>{n&&clearTimeout(n)}},addPhotoFigcaption:()=>{document.querySelectorAll("#article-container img").forEach((e=>{const t=e.parentNode,n=e.title||e.alt;if(n&&!t.parentNode.classList.contains("justified-gallery")){const o=document.createElement("div");o.className="img-alt is-center",o.textContent=n,t.insertBefore(o,e.nextSibling)}}))},runJustifiedGallery:e=>{if(e.forEach((e=>{e.querySelectorAll("img").forEach((e=>{const t=e.getAttribute("data-lazy-src");t&&(e.src=t),cloudchewieFn.wrap(e,"div",{class:"fj-gallery-item"})}))})),window.fjGallery)return void setTimeout((()=>{cloudchewieFn.initJustifiedGallery(e)}),100);const t=document.createElement("link");t.rel="stylesheet",t.href=GLOBAL_CONFIG.source.justifiedGallery.css,document.body.appendChild(t),getScript(`${GLOBAL_CONFIG.source.justifiedGallery.js}`).then((()=>{cloudchewieFn.initJustifiedGallery(e)}))},runLightbox:()=>{cloudchewieFn.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox)"))},toggleReadMode:()=>{const e=()=>{t.classList.remove("read-mode"),document.getElementById("post").classList.remove("read-mode"),n.remove(),n.removeEventListener("click",e),cloudchewieFn.isReadMode=!1,$(".aplayer").show(),$("#con-readmode").removeClass("checked"),$(document.getElementById("post-meta")).show()},t=document.body;t.classList.add("read-mode"),document.getElementById("post").classList.add("read-mode");const n=document.createElement("button");n.type="button",n.className="fas fa-sign-out-alt exit-readmode",n.removeEventListener("click",e),t.appendChild(n),consoleFn.closeConsole(),$(document.getElementById("post-meta")).hide(),cloudchewieFn.isReadMode=!0,$("#con-readmode").addClass("checked"),$(".aplayer").hide(),n.addEventListener("click",e)},toggleDarkMode:()=>{const e="dark"===document.documentElement.getAttribute("data-theme")?"dark":"light";$("#menus > div.menus_items > div:nth-child(7) > a > span"),$("#sidebar-menus > div.menus_items > div:nth-child(7) > a > span");"light"===e?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),cloudchewieFn.day_night_count++,void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200)},copyArticleLink:function(){let e=window.location.href,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)},translate:()=>{document.getElementById("con-translate").click()},toggleSideBtn:e=>{const t=document.getElementById("rightside-button-list").classList;t.toggle("show"),e.classList.contains("show")&&(t.add("status"),setTimeout((()=>{t.remove("status")}),300)),e.classList.toggle("show")},toggleAside:()=>{if(!cloudchewieFn.isHome()){const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("enableAside","show",2):saveToLocal.set("enableAside","hide",2),e.toggle("hide-aside"),"hide"==saveToLocal.get("enableAside")?$("#con-toggleaside").addClass("checked"):$("#con-toggleaside").removeClass("checked")}},toggleMobileToc:()=>{"0"===window.getComputedStyle(document.getElementById("card-toc")).getPropertyValue("opacity")?(window.mobileToc.open(),$("#mobile-toc-button").addClass("checked")):(window.mobileToc.close(),$("#mobile-toc-button").removeClass("checked"))},toggleSidebar:()=>{document.querySelectorAll("#sidebar-menus .site-page.group").forEach((e=>{e.addEventListener("click",(e=>{e.target.classList.toggle("hide")}))}))},enlargeEmoji:()=>{let e=1,t="",n=document.createElement("div"),o=document.querySelector("body");n.id="owo-big",o.appendChild(n),new MutationObserver((i=>{for(let c=0;c<i.length;c++){let a=i[c].addedNodes,l="";if(2==a.length&&"OwO-body"==a[1].className)l=a[1];else{if(1!=a.length||"tk-comment"!=a[0].className)continue;l=a[0]}document.body.clientWidth<=768&&l.addEventListener("contextmenu",(e=>e.preventDefault())),l.onmouseover=i=>{e&&"IMG"==i.target.tagName&&(e=0,t=setTimeout((()=>{let e=3*i.target.clientHeight,t=3*i.target.clientWidth,c=i.x-i.offsetX-(t-i.target.clientWidth)/2,a=i.y-i.offsetY;c+t>o.clientWidth&&(c-=c+t-o.clientWidth+10),c<0&&(c=10),n.style.cssText=`display:flex; height:${e}px; width:${t}px; left:${c}px; top:${a}px;`,n.innerHTML=`<img src="${i.target.src}">`}),300))},l.onmouseout=()=>{n.style.display="none",e=1,clearTimeout(t)}}})).observe(document.getElementById("post-comment"),{subtree:!0,childList:!0})},switchComments:()=>{let e=!1;const t=document.querySelector("#comment-switch > .switch-btn");t&&t.addEventListener("click",(()=>{this.classList.toggle("move"),document.querySelectorAll("#post-comment > .comment-wrap > div").forEach((e=>{cloudchewieFn.isHidden(e)?e.style.cssText="display: block;animation: tabshow .5s":e.style.cssText="display: none;animation: ''"})),e||"function"!=typeof loadOtherComment||(e=!0,loadOtherComment())}))},enhanceTwikoo:()=>{if(document.getElementById("site-title")&&document.getElementById("site-title").innerHTML.trim()==document.querySelector("#menus > div.menus_items > div:nth-child(5) > a > span").innerHTML.trim()){document.querySelector("#post-comment > div.comment-head > div > span").innerHTML="  留言板  ";setInterval((()=>{document.querySelectorAll(".el-textarea__inner").forEach((e=>{"请输入您的留言"!=e.getAttribute("placeholder")&&e.setAttribute("placeholder","请输入您的留言")})),document.querySelectorAll("#twikoo > div.tk-comments > div.tk-comments-container > div.tk-comments-no > span").forEach((e=>{"没有评论"==e.innerHTML&&(e.innerHTML="没有留言")})),document.querySelectorAll("#twikoo > div.tk-comments > div.tk-comments-container > div.tk-comments-title > span.tk-comments-count > span:nth-child(2)").forEach((e=>{" 条评论"==e.innerHTML&&(e.innerHTML=" 条留言")}))}),300)}document.getElementById("post-comment")&&setInterval((()=>{if(document.getElementById("CommentaryRegulations")){var e=document.createElement("div");e.id="CommentaryRegulations",e.classList.add("tk-submit-action-icon"),e.innerHTML="<a href='/term/' target='_blank' title='评论条例'></a>",document.querySelector(".tk-row-actions-start")&&document.querySelector(".tk-row-actions-start").appendChild(e)}}),300)},bindListener:()=>{$("#categoryBar > ul > li").each((function(){this.addEventListener("click",(()=>{pjax.loadUrl($(this).find("a").attr("href"))}))}))},categoriesBarActive:()=>{var e=window.location.pathname;if(e=decodeURIComponent(e),cloudchewieFn.isHome())document.querySelector("#category-bar")&&document.getElementById("首页").classList.add("select");else{if(/\/categories\/.*?\//.test(e)){var t=e.split("/")[2];document.querySelector("#category-bar")&&document.getElementById(t).classList.add("select")}}},topCategoriesBarScroll:()=>{if(document.getElementById("category-bar-items")){let e=document.getElementById("category-bar-items");e.addEventListener("mousewheel",(function(t){let n=-t.wheelDelta/2;e.scrollLeft+=n,t.preventDefault()}),!1)}},scrollFunction:()=>{const e=document.getElementById("rightside"),t=window.innerHeight+56;if(document.body.scrollHeight<=t&&"/nowtime/"!=location.pathname&&"/guestbook/"!=location.pathname)return void(e.style.cssText="opacity: 1; transform: translateX(-60px)");let n=0,o=!0;const i=document.getElementById("page-header"),c="function"==typeof chatBtnHide,a="function"==typeof chatBtnShow;window.scrollCollect=()=>cloudchewieFn.throttle((l=>{const s=window.scrollY||document.documentElement.scrollTop,d=function(e){const t=e>n;return n=e,t}(s);s<10?i.classList.add("nav-top"):i.classList.remove("nav-top"),s>56?("false"==cloudchewieFn.loadData("enableFixedNav")&&(d?(i.classList.contains("nav-visible")&&i.classList.remove("nav-visible"),a&&!0===o&&(chatBtnHide(),o=!1)):(i.classList.contains("nav-visible")||i.classList.add("nav-visible"),c&&!1===o&&(chatBtnShow(),o=!0)),i.classList.add("nav-fixed")),"0"===window.getComputedStyle(e).getPropertyValue("opacity")&&"true"==cloudchewieFn.loadData("enableRightSide")&&(e.style.cssText="opacity: 0.8; transform: translateX(-60px)")):(0===s&&"false"==cloudchewieFn.loadData("enableFixedNav")&&i.classList.remove("nav-fixed","nav-visible"),"true"==cloudchewieFn.loadData("enableRightSide")&&(e.style.cssText="opacity: ''; transform: ''")),document.body.scrollHeight<=t&&"true"==cloudchewieFn.loadData("enableRightSide")&&(e.style.cssText="opacity: 0.8; transform: translateX(-60px)")}),200)(),window.addEventListener("scroll",window.scrollCollect)},scrollFunctionOfToc:()=>{const e=GLOBAL_CONFIG_SITE.isToc,t=GLOBAL_CONFIG.isAnchor,n=document.getElementById("article-container");if(!n||!e&&!t)return;let o,i,c,a,l;if(e){const e=document.getElementById("card-toc");i=e.getElementsByClassName("toc-content")[0],o=i.querySelectorAll(".toc-link");const t=e.querySelector(".toc-percentage");l=i.classList.contains("is-expand"),c=e=>{const o=n.clientHeight,i=document.documentElement.clientHeight,c=(e-n.offsetTop)/(o>i?o-i:document.documentElement.scrollHeight-i),a=Math.round(100*c),l=a>100?100:a<=0?0:a;t.textContent=l},window.mobileToc={open:()=>{e.style.cssText="animation: toc-open .3s; opacity: 1; right: 55px"},close:()=>{e.style.animation="toc-close .2s",setTimeout((()=>{e.style.cssText="opacity:''; animation: ''; right: ''"}),100)}},i.addEventListener("click",(e=>{e.preventDefault();const t=e.target.classList;if(t.contains("toc-content"))return;const n=t.contains("toc-link")?e.target:e.target.parentElement;cloudchewieFn.scrollToDest(cloudchewieFn.getEleTop(document.getElementById(decodeURI(n.getAttribute("href")).replace("#",""))),300),window.innerWidth<900&&(window.mobileToc.close(),$("#mobile-toc-button").removeClass("checked"))})),a=e=>{const t=e.getBoundingClientRect().top,n=i.scrollTop;t>document.documentElement.clientHeight-100&&(i.scrollTop=n+150),t<100&&(i.scrollTop=n-150)}}const s=n.querySelectorAll("h1,h2,h3,h4,h5,h6");let d="";window.resolveTocScrollFunction=()=>cloudchewieFn.throttle((()=>{const n=window.scrollY||document.documentElement.scrollTop;e&&c(n),(n=>{if(0===n)return!1;let c="",r="";if(s.forEach(((e,t)=>{if(n>cloudchewieFn.getEleTop(e)-80){const n=e.id;c=n?"#"+encodeURI(n):"",r=t}})),d!==r&&(t&&cloudchewieFn.updateAnchor(c),d=r,e)){if(i.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")})),""===c)return;const e=o[r];if(e.classList.add("active"),setTimeout((()=>{a(e)}),0),l)return;let t=e.parentNode;for(;!t.matches(".toc");t=t.parentNode)t.matches("li")&&t.classList.add("active")}})(n)}),100)(),window.addEventListener("scroll",resolveTocScrollFunction)},browsingProgress:()=>{window.addEventListener("scroll",(()=>{let e=document.documentElement.scrollTop||window.scrollY,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#go-up");down=document.querySelector("#go-down"),null!=o&&(n<=95?(o.childNodes[0].style.display="none",o.childNodes[1].style.display="block",o.childNodes[1].childNodes[0].innerHTML=n):(o.childNodes[1].style.display="none",o.childNodes[0].style.display="block")),n<=95&&document.documentElement.scrollTop>20?down.style.display="block":down.style.display="none",cloudchewieFn.isInViewPortOfOne(document.getElementById("post-comment"))?$("#to_comment").hide():$("#to_comment").show(),cloudchewieFn.percentageScrollFn(e)})),document.documentElement.scrollTop>20?document.querySelector("#go-down").style.display="block":document.querySelector("#go-down").style.display="none"},qrcodeCreate:function(){if(document.getElementById("qrcode")){document.getElementById("qrcode").innerHTML="";new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}},percentageScrollFn:e=>{const t=document.getElementById("percent"),n=document.getElementById("nav-totop");let o=document.getElementById("body-wrap").clientHeight,i=document.getElementById("post-comment")||document.getElementById("footer");const c=document.documentElement.clientHeight,a=e/(o>c?o-c:document.documentElement.scrollHeight-c),l=Math.round(100*a),s=l>100?100:l<=0?1:l;t.textContent=s,(cloudchewieFn.isInViewPortOfOne(i)||s>90)&&document.documentElement.scrollTop>20?(n.classList.add("long"),t.textContent="回到顶部",document.body.clientWidth<=768&&(document.getElementById("search-button").style.display="none")):(n.classList.remove("long"),t.textContent=s,setTimeout((()=>{document.getElementById("search-button").style.display="inline"}),300))},addCopyright:()=>{const e=GLOBAL_CONFIG.copyright;document.body.oncopy=t=>{let n;t.preventDefault();const o=window.getSelection(0).toString();return n=o.length>e.limitCount?o+"\n\n\n"+e.languages.author+"\n"+e.languages.link+window.location.href+"\n"+e.languages.source+"\n"+e.languages.info:o,t.clipboardData?t.clipboardData.setData("text",n):window.clipboardData.setData("text",n)}},addRuntime:()=>{const e=document.getElementById("runtimeshow");if(e){const t=e.getAttribute("data-publishDate");e.innerText=cloudchewieFn.diffDate(t)+" "+GLOBAL_CONFIG.runtime}},addLastPushDate:()=>{const e=document.getElementById("last-push-date");if(e){const t=e.getAttribute("data-lastPushDate");e.innerText=cloudchewieFn.diffDate(t,!0)}},addTableWrap:()=>{const e=document.querySelectorAll("#article-container :not(.highlight) > table, #article-container > table");e.length&&e.forEach((e=>{cloudchewieFn.wrap(e,"div",{class:"table-wrap"})}))},clickFnOfTagHide:()=>{const e=document.querySelectorAll("#article-container .hide-button");e.length&&e.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target;t.classList.add("open");const n=t.nextElementSibling.querySelectorAll(".fj-gallery");n.length&&cloudchewieFn.initJustifiedGallery(n)}))}))},clickFnOfTabs:()=>{document.querySelectorAll("#article-container .tab > button").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target,n=t.parentNode;if(!n.classList.contains("active")){const e=n.parentNode.nextElementSibling,o=cloudchewieFn.siblings(n,".active")[0];o&&o.classList.remove("active"),n.classList.add("active");const i=t.getAttribute("data-href").replace("#","");[...e.children].forEach((e=>{e.id===i?e.classList.add("active"):e.classList.remove("active")}));const c=e.querySelectorAll(`#${i} .fj-gallery`);c.length>0&&cloudchewieFn.initJustifiedGallery(c)}}))}))},tabToTop:()=>{document.querySelectorAll("#article-container .tabs .tab-to-top").forEach((e=>{e.addEventListener("click",(e=>{cloudchewieFn.scrollToDest(cloudchewieFn.getEleTop(cloudchewieFn.getParents(e.target,".tabs")),300)}))}))},toggleCardCategory:()=>{const e=document.querySelectorAll("#aside-cat-list .card-category-list-item.parent i");e.length&&e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.classList.toggle("expand");const n=t.parentNode.nextElementSibling;cloudchewieFn.isHidden(n)?n.style.display="block":n.style.display="none"}))}))},addPostOutdateNotice:()=>{const e=GLOBAL_CONFIG.noticeOutdate,t=cloudchewieFn.diffDate(GLOBAL_CONFIG_SITE.postUpdate);if(t>=e.limitDay){const n=document.createElement("div");n.className="post-outdate-notice",n.textContent=e.messagePrev+" "+t+" "+e.messageNext;const o=document.getElementById("article-container");"top"===e.position?o.insertBefore(n,o.firstChild):o.appendChild(n)}},lazyloadImg:()=>{window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})},relativeDate:e=>{e.forEach((e=>{const t=e,n=t.getAttribute("datetime");t.innerText=cloudchewieFn.diffDate(n,!0),t.style.display="inline"}))},randomPost:()=>{let e=saveToLocal.get("postLinks");if(e)for(;;){let t=e[Math.floor(Math.random()*e.length)];if("/"!=t&&"/404.html"!=t)return void pjax.loadUrl(t)}fetch("/sitemap.xml").then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>{let t=e.querySelectorAll("url loc"),n=[];t.forEach((e=>{let t=e.innerHTML.split("/"),o="/";for(var i=3;i<t.length;i++)i==t.length-1?o+=t[i]:o+=t[i]+"/";n.push(o)})),saveToLocal.set("postLinks",n,.02),cloudchewieFn.randomPost()}))},sweetSnack:()=>{"NaN"==cloudchewieFn.getCookie("daynight")?cloudchewieFn.day_night_count=0:cloudchewieFn.day_night_count=new Number(cloudchewieFn.getCookie("daynight")),setInterval((()=>{cloudchewieFn.day_night_count+-3==0&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("冬至·伊始:我的心与爱是不是能够这般纯粹，经受住时空的考验"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==20&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("交替·新生:月徊而霜凝兮，良人伴我侧；月斜而影绰兮，明镜照我心"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==60&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("风起·渴盼:桐絮扰动着尘世，恋人缔造着世界；细腻不语的青苔，是我对你的爱恋"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==120&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("雾霭·探索:越来越浓的雾霭模糊着彼此的视线，越来越厚的障壁阻隔着彼此的心儿"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==200&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("拨云·成长:生活不全都是恋爱，恋爱却全都是生活"),cloudchewieFn.day_night_count++),cloudchewieFn.setCookie("daynight",cloudchewieFn.day_night_count.toString())}),500)},switchPostChart:()=>{let e="light"===document.documentElement.getAttribute("data-theme")?"#4C4948":"rgba(255,255,255,0.7)";if(document.getElementById("posts-chart")&&postsOption)try{let t=postsOption;t.title.textStyle.color=e,t.xAxis.nameTextStyle.color=e,t.yAxis.nameTextStyle.color=e,t.xAxis.axisLabel.color=e,t.yAxis.axisLabel.color=e,t.xAxis.axisLine.lineStyle.color=e,t.yAxis.axisLine.lineStyle.color=e,t.series[0].markLine.data[0].label.color=e,postsChart.setOption(t)}catch(e){}if(document.getElementById("tags-chart")&&tagsOption)try{let t=tagsOption;t.title.textStyle.color=e,t.xAxis.nameTextStyle.color=e,t.yAxis.nameTextStyle.color=e,t.xAxis.axisLabel.color=e,t.yAxis.axisLabel.color=e,t.xAxis.axisLine.lineStyle.color=e,t.yAxis.axisLine.lineStyle.color=e,t.series[0].markLine.data[0].label.color=e,tagsChart.setOption(t)}catch(e){}if(document.getElementById("categories-chart")&&categoriesOption)try{let t=categoriesOption;t.title.textStyle.color=e,t.legend.textStyle.color=e,categoryParentFlag||(t.series[0].label.color=e),categoriesChart.setOption(t)}catch(e){}},loadDamaku:()=>{const e=new EasyDanmaku({el:"#danmu",line:10,speed:20,hover:!0,loop:!0});let t=saveToLocal.get("danmu");if(t)e.batchSend(t,!0);else{let o=[];function n(e){return(e=(e=(e=(e=e.replace(/<\/*br>|[\s\uFEFF\xA0]+/g,"")).replace(/<img.*?>/g,"[图片]")).replace(/<a.*?>.*?<\/a>/g,"[链接]")).replace(/<pre.*?>.*?<\/pre>/g,"[代码块]")).replace(/<.*?>/g,"")}fetch("https://comment.cloudchewie.com/",{method:"POST",body:JSON.stringify({event:"GET_RECENT_COMMENTS",accessToken:"df242fe099bf81ec336572476fbdc208",includeReply:!1,pageSize:100}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((({data:t})=>{t.forEach((e=>{null==e.avatar&&(e.avatar="https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp"),o.push({avatar:e.avatar,content:e.nick+"："+n(e.comment)})})),e.batchSend(o,!0),saveToLocal.set("danmu",o,.02)}))}document.getElementById("danmuBtn").innerHTML="<button class=\"hideBtn\" onclick=\"document.getElementById('danmu').classList.remove('hidedanmu')\">显示弹幕</button> <button class=\"hideBtn\" onclick=\"document.getElementById('danmu').classList.add('hidedanmu')\">隐藏弹幕</button>"},toggleMusic:function(e=!0){if(cloudchewieFn.isMusic()){let t='<i class="fas fa-play"></i><span>播放音乐</span>',n='<i class="fas fa-pause"></i><span>暂停音乐</span>';cloudchewie_musicPlaying?(document.getElementById("menu-music-toggle").innerHTML=t,document.querySelector("#con-music i").classList="fas fa-play",cloudchewie_musicPlaying=!1):(document.getElementById("menu-music-toggle").innerHTML=n,document.querySelector("#con-music").classList.add("on"),document.querySelector("#con-music i").classList="fas fa-pause",cloudchewie_musicPlaying=!0),e&&anMusicEl.querySelector("meting-js").aplayer.toggle()}else{cloudchewie_musicFirst||(cloudchewieFn.musicBindEvent(),cloudchewie_musicFirst=!0);let t='<i class="fas fa-play"></i><span>播放音乐</span>',n='<i class="fas fa-pause"></i><span>暂停音乐</span>';cloudchewie_musicPlaying?(navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML=t,document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#con-music i").classList="fas fa-play",cloudchewie_musicPlaying=!1,navMusicEl.classList.remove("stretch")):(navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML=n,document.querySelector("#con-music").classList.add("on"),document.querySelector("#con-music i").classList="fas fa-pause",cloudchewie_musicPlaying=!0,navMusicEl.classList.add("stretch")),e&&document.querySelector("#nav-music meting-js").aplayer.toggle()}},musicTelescopic:function(){navMusicEl.classList.contains("stretch")?navMusicEl.classList.remove("stretch"):navMusicEl.classList.add("stretch")},musicSkipBack:function(){navMusicEl.querySelector("meting-js").aplayer.skipBack(),rm.hideRightMenu()},musicSkipForward:function(){navMusicEl.querySelector("meting-js").aplayer.skipForward(),rm.hideRightMenu()},musicGetName:function(){for(var e=document.querySelector(".aplayer-title"),t=[],n=e.length-1;n>=0;n--)t[n]=e[n].innerText;return t[0]},musicBindEvent:function(){document.querySelector("#nav-music .aplayer-music").addEventListener("click",(function(){cloudchewieFn.musicTelescopic()})),document.querySelector("#nav-music .aplayer-button").addEventListener("click",(function(){cloudchewieFn.toggleMusic(!1)}))},listenNavMusicPause:function(){const e=setInterval((()=>{if(navMusicEl.querySelector("#nav-music meting-js").aplayer){clearInterval(e);let t='<i class="fas fa-play"></i><span>播放音乐</span>',n='<i class="fas fa-pause"></i><span>暂停音乐</span>';navMusicEl.querySelector("#nav-music meting-js").aplayer.on("pause",(function(){navMusicEl.classList.remove("playing"),document.getElementById("menu-music-toggle").innerHTML=t,document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#con-music i").classList="fas fa-play",cloudchewie_musicPlaying=!1,navMusicEl.classList.remove("stretch")})),navMusicEl.querySelector("#nav-music meting-js").aplayer.on("play",(function(){navMusicEl.classList.add("playing"),document.getElementById("menu-music-toggle").innerHTML=n,document.querySelector("#con-music i").classList="fas fa-pause",cloudchewie_musicPlaying=!0}))}}),16)},playMusic(){if(cloudchewieFn.isMusic()){document.getElementById("anMusic-page").querySelector("meting-js").aplayer.play()}else{document.getElementById("nav-music").querySelector("meting-js").aplayer.play()}},changeMusicBg:function(e=!0){const t=document.getElementById("an_music_bg");if(e){const e=document.querySelector("#anMusic-page .aplayer-pic");t.style.backgroundImage=e.style.backgroundImage,$web_container.style.background="none"}else{let e=setInterval((()=>{document.querySelector("#anMusic-page .aplayer-pic")&&(clearInterval(e),cloudchewieFn.addEventListenerMusic(),cloudchewieFn.changeMusicBg(),document.querySelector("#nav-music meting-js").aplayer&&!document.querySelector("#nav-music meting-js").aplayer.audio.paused&&cloudchewieFn.toggleMusic())}),100)}null!=document.querySelector("#anMusic-page .aplayer-title")&&null!=document.querySelector("#anMusic-page .aplayer-title").innerHTML&&""!=document.querySelector("#anMusic-page .aplayer-title").innerHTML&&(document.title=document.querySelector("#anMusic-page .aplayer-title").innerHTML+" - 天籁 | Cloudchewie")},initAnPlayer:function(){if(!cloudchewieFn.isMusic())return;const e=new URLSearchParams(window.location.search);var t="7185982924",n="netease";if(null!=cloudchewieFn.loadData("playlist")){var o=JSON.parse(cloudchewieFn.loadData("playlist"));t=o.id,n=o.server}const i=document.getElementById("anMusic-page-meting");if(e.get("id")&&e.get("server")){const t=e.get("id"),n=e.get("server");i.innerHTML=`<meting-js id="${t}" server=${n} type="playlist" type="playlist" mutex="true" preload="auto" theme="var(--theme-color)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>`}else i.innerHTML=`<meting-js id="${t}" server="${n}" type="playlist" mutex="true" preload="auto" theme="var(--theme-color)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>`;cloudchewieFn.changeMusicBg(!1)},addEventListenerMusic:function(){const e=document.getElementById("anMusic-page"),t=e.querySelector(".aplayer-info .aplayer-time .aplayer-icon-menu"),n=e.querySelector("meting-js").aplayer;n.volume(.8,!0),n.on("loadeddata",(function(){cloudchewieFn.changeMusicBg()})),t.addEventListener("click",(function(){document.getElementById("menu-mask").style.display="block",document.getElementById("menu-mask").style.animation="0.5s ease 0s 1 normal none running to_show",e.querySelector(".aplayer.aplayer-withlist .aplayer-list").style.opacity="1"})),document.getElementById("menu-mask").addEventListener("click",(function t(){console.log("click"),cloudchewieFn.isMusic()?null!=e.querySelector(".aplayer-list")&&e.querySelector(".aplayer-list").classList.remove("aplayer-list-hide"):document.getElementById("menu-mask").removeEventListener("click",t)})),document.addEventListener("keydown",(function(e){"Space"===e.code&&(e.preventDefault(),n.toggle()),39===e.keyCode&&(e.preventDefault(),n.skipForward()),37===e.keyCode&&(e.preventDefault(),n.skipBack()),38===e.keyCode&&musicVolume<=1&&(musicVolume+=.1,n.volume(musicVolume,!0)),40===e.keyCode&&musicVolume>=0&&(musicVolume+=-.1,n.volume(musicVolume,!0))}))},changeMusicList:async function(e,t,n="playlist"){if(cloudchewieFn.isMusic()){const o=document.getElementById("anMusic-page");if(null==o||null==o.querySelector("meting-js"))return;const i=o.querySelector("meting-js").aplayer;o.querySelector("meting-js")._fetchSongs(e,t,n).then((e=>{if(null!=i){let t=i.audio.paused;i.list.clear(),i.list.add(e),t||cloudchewieFn.playMusic()}}))}else{const o=document.getElementById("nav-music");if(null==o||null==o.querySelector("meting-js"))return;const i=o.querySelector("meting-js").aplayer;o.querySelector("meting-js")._fetchSongs(e,t,n).then((e=>{if(null!=i){let t=i.audio.paused;i.list.clear(),i.list.add(e),t||cloudchewieFn.playMusic()}}))}},bindRightSideBtn:()=>{document.getElementById("rightside").addEventListener("click",(e=>{const t=e.target.id?e.target:e.target.parentNode;switch(t.id){case"go-up":cloudchewieFn.scrollToTop();break;case"go-down":cloudchewieFn.scrollToBottom();break;case"rightside_config":cloudchewieFn.toggleSideBtn(t);break;case"mobile-toc-button":cloudchewieFn.toggleMobileToc();break;case"readmode":cloudchewieFn.toggleReadMode();break;case"darkmode":cloudchewieFn.toggleDarkMode();break;case"hide-aside-btn":cloudchewieFn.toggleAside()}}))},messFunction:()=>{if($("#aside-content > div.card-widget.card-info > div.card-info-social-icons.is-center > a:nth-child(1)").attr("target",""),cloudchewieFn.isHome()){$("#hide-aside-btn").hide();const e=document.documentElement.classList;e.contains("hide-aside")&&(saveToLocal.set("enableAside","show",2),e.toggle("hide-aside"))}$("a.social-icon").each((()=>{$(this).attr("target","_blank")})),setInterval((()=>{$(".CtxtMenu_MenuArrow").html("")}),200),localStorage.setItem("MathJax-Menu-Settings",'{"zoom":"Click","scale":"1"}'),2==Number(saveToLocal.get("translate-chn-cht"))?$("#con-translate > i").attr("class","iconfont icon-fanti"):1==Number(saveToLocal.get("translate-chn-cht"))&&$("#con-translate > i").attr("class","iconfont icon-jianti"),"hide"==saveToLocal.get("enableAside")?$("#con-toggleaside").addClass("checked"):$("#con-toggleaside").removeClass("checked")}},addHighlight=function(){const e=GLOBAL_CONFIG.highlight;if(!e)return;const t=e.highlightCopy,n=e.highlightLang,o=GLOBAL_CONFIG_SITE.isHighlightShrink,i=e.highlightHeightLimit,c=t||n||void 0!==o,a="highlighjs"===e.plugin?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!c&&!i||!a.length)return;const l="prismjs"===e.plugin;let s="",d="";const r=!0===o?"closed":"";void 0!==o&&(s=`<i class="fas fa-angle-down expand ${r}"></i>`),t&&(d='<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>');const u=e=>{const t=e.parentNode;t.classList.add("copy-true");const n=window.getSelection(),o=document.createRange();l?o.selectNodeContents(t.querySelectorAll("pre code")[0]):o.selectNodeContents(t.querySelectorAll("table .code pre")[0]),n.removeAllRanges(),n.addRange(o);n.toString();((e,t)=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy"))if(document.execCommand("copy"),void 0!==GLOBAL_CONFIG.Snackbar)cloudchewieFn.snackbarShow(GLOBAL_CONFIG.copy.success);else{const e=t.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),700)}else void 0!==GLOBAL_CONFIG.Snackbar?cloudchewieFn.snackbarShow(GLOBAL_CONFIG.copy.noSupport):t.previousElementSibling.innerText=GLOBAL_CONFIG.copy.noSupport})(0,e.lastChild),n.removeAllRanges(),t.classList.remove("copy-true")},m=function(e){const t=e.target.classList;t.contains("expand")?(e=>{const t=[...e.parentNode.children].slice(1);e.firstChild.classList.toggle("closed"),cloudchewieFn.isHidden(t[t.length-1])?t.forEach((e=>{e.style.display="block"})):t.forEach((e=>{e.style.display="none"}))})(this):t.contains("copy-button")&&u(this)},h=function(){this.classList.toggle("expand-done")};function g(e,t,n){const o=document.createDocumentFragment();if(c){const t=document.createElement("div");t.className=`highlight-tools ${r}`,t.innerHTML=s+e+d,t.addEventListener("click",m),o.appendChild(t)}if(i&&t.offsetHeight>i+30){const e=document.createElement("div");e.className="code-expand-btn",e.innerHTML='<i class="fas fa-angle-double-down"></i>',e.addEventListener("click",h),o.appendChild(e)}"hl"===n?t.insertBefore(o,t.firstChild):t.parentNode.insertBefore(o,t)}n?l?a.forEach((function(e){const t=`<div class="code-lang">${e.getAttribute("data-language")?e.getAttribute("data-language"):"Code"}</div>`;cloudchewieFn.wrap(e,"figure",{class:"highlight"}),g(t,e)})):a.forEach((function(e){let t=e.getAttribute("class").split(" ")[1];"plain"!==t&&void 0!==t||(t="Code");g(`<div class="code-lang">${t}</div>`,e,"hl")})):l?a.forEach((function(e){cloudchewieFn.wrap(e,"figure",{class:"highlight"}),g("",e)})):a.forEach((function(e){g("",e,"hl")}))};!function(){this.loaded=0,this.failed=0,this.total=0,this.watch=function(e,t){var n=document.querySelectorAll(e);if(!n.length)return console.log("[imgStatus]: There aren't any images associated with this selector ("+e+")!");this.total=n.length;for(var o=0;o<this.total;o++)isCached(n[o].src)?this._setLoaded(t):n[o].addEventListener?(n[o].addEventListener("load",this._setLoaded.bind(this,t)),n[o].addEventListener("error",this._setFailed.bind(this,t))):(n[o].attachEvent("onload",this._setLoaded.bind(this,t)),n[o].attachEvent("onerror",this._setFailed.bind(this,t)))},this.isCached=function(e){var t=new Image;return t.src=e,t.complete},this._setFailed=function(e,t){++this.failed,"function"==typeof e&&e(this)},this._setLoaded=function(e,t){++this.loaded,"function"==typeof e&&e(this)},this.isDone=function(){return this.loaded+this.failed===this.total},"object"==typeof window&&(window.imgStatus=this)}();const mobileSidebarFn={dragStartX:0,mobileSidebarOpen:!1,onDragStart:e=>{mobileSidebarFn.dragStartX=mobileSidebarFn.getEventX(e),$web_box.style.transition="all .3s",mobileSidebarFn.addMoveEndListeners(mobileSidebarFn.onDragMove,mobileSidebarFn.onDragEnd)},onDragMove:e=>{const t=mobileSidebarFn.getEventX(e)-mobileSidebarFn.dragStartX;if(t<0){const e=window.innerWidth,n=Math.min(-300,-1*t/e*300),o=Math.min(1,.86+t/e*.14);$web_box.style.transform=`translate3d(-${n}px, 0px, 0px) scale3d(${o}, ${o}, 1)`}},onDragMove:e=>{const t=mobileSidebarFn.getEventX(e)-mobileSidebarFn.dragStartX;if(t<0){const e=window.innerWidth,n=Math.min(-300,-1*t/e*300),o=Math.min(1,.86+t/e*.14);$web_box.style.transform=`translate3d(-${n}px, 0px, 0px) scale3d(${o}, ${o}, 1)`}},onDragEnd:e=>{const t=window.innerWidth;mobileSidebarFn.getEventX(e)<=t/1.5?mobileSidebarFn.completeTransition():mobileSidebarFn.resetTransition(),mobileSidebarFn.removeMoveEndListeners(mobileSidebarFn.onDragMove,mobileSidebarFn.onDragEnd)},completeTransition:()=>{$web_box.style.transition="all 0.3s ease-out",$web_box.style.transform="none",mobileSidebarFn.close(),mobileSidebarFn.removeMoveEndListeners(mobileSidebarFn.onDragMove,mobileSidebarFn.onDragEnd)},resetTransition:()=>{$web_box.style.transition="",$web_box.style.transform=""},getEventX:e=>e.type.startsWith("touch")?e.changedTouches[0].clientX:e.clientX,addMoveEndListeners:(e,t)=>{document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t)},removeMoveEndListeners:(e,t)=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t)},open:()=>{cloudchewieFn.sidebarPaddingR(),$sidebarMenus.classList.add("open"),$rightside.classList.add("hide"),document.body.style.overflow="hidden",cloudchewieFn.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),mobileSidebarFn.mobileSidebarOpen=!0,$web_box.classList.add("open"),$web_box.addEventListener("mousedown",mobileSidebarFn.onDragStart),$web_box.addEventListener("touchstart",mobileSidebarFn.onDragStart,{passive:!1}),cloudchewieFn.isMusic()?$web_container.style.background="rgb(255 255 255 / 20%)":$web_container.style.background="var(--global-bg)"},close:()=>{$sidebarMenus.classList.remove("open");const e=document.body;e.style.overflow="",$rightside.classList.remove("hide"),e.style.paddingRight="",cloudchewieFn.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),mobileSidebarFn.mobileSidebarOpen=!1,$web_box.classList.remove("open"),$web_container.style.background="none",document.getElementById("nav-totop").classList.remove("long"),$web_box.removeEventListener("mousedown",mobileSidebarFn.onDragStart),$web_box.removeEventListener("touchstart",mobileSidebarFn.onDragStart,{passive:!1})}};function runOne(){document.getElementById("con-mode").addEventListener("click",(function(){setTimeout(cloudchewieFn.switchPostChart,100)})),document.onkeydown=function(e){(e=e||window.event).keyCode},navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||cloudchewieFn.bindContextMenu(!0),cloudchewieFn.addLongtabListener(document.documentElement,(()=>cloudchewieFn.bindContextMenu(!0))),cloudchewieFn.resizeTop(),cloudchewieFn.categoriesBarActive(),cloudchewieFn.topCategoriesBarScroll(),cloudchewieFn.bindListener()}