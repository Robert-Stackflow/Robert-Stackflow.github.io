const consoleFn={setDefaultThemeColor:e=>{let a=":root {  --global-font-size: 14px;  --theme-color: #3B70FC; --font-color: #4c4948;  --hr-border: #d2ebfd;  --hr-before-color: #bfe4fb;  --search-bg: #f6f8fa;  --search-input-color: #4c4948;  --search-result-title: #4c4948;  --preloader-bg: #37474f;  --preloader-color: #fff;  --tab-border-color: #f0f0f0;  --tab-botton-bg: #f0f0f0;  --tab-botton-color: #1f2d3d;  --tab-button-hover-bg: #dcdcdc;  --tab-button-active-bg: #fff;  --card-bg: #fff;  --sidebar-bg: #f6f8fa;  --btn-hover-color: #24b1ff;  --btn-color: #fff;  --btn-bg: #3B70FC;  --text-bg-hover: rgba(0,153,255,0.7);  --light-grey: #eee;  --dark-grey: #cacaca;  --white: #fff;  --text-highlight-color: #1f2d3d;  --blockquote-color: #6a737d;  --blockquote-bg: rgba(0,153,255,0.1);  --reward-pop: #f5f5f5;  --toc-link-color: #666261;  --card-border: 1px solid var(--tab-botton-bg);  --card-box-shadow: 0 0px 0px 0px rgba(45,45,45,0.05);  --card-box-shadow-olded: 0 8px 12px -3px rgba(45,45,45,0.05);  --card-hover-box-shadow: 0 8px 12px -3px rgba(45,45,45,0.05);  --card-border-dashed: 2px dashed var(--tab-button-hover-bg);  --pseudo-hover: #24b1ff;  --headline-presudo: #a0a0a0;}",o="[data-theme='dark'] {  --global-bg: #0d0d0d;  --font-color: rgba(255,255,255,0.7);  --hr-border: rgba(255,255,255,0.4);  --hr-before-color: rgba(255,255,255,0.7);  --search-bg: #121212;  --search-input-color: rgba(255,255,255,0.7);  --search-result-title: rgba(255,255,255,0.9);  --preloader-bg: #0d0d0d;  --preloader-color: rgba(255,255,255,0.7);  --tab-border-color: #2c2c2c;  --tab-botton-bg: #2c2c2c;  --tab-botton-color: rgba(255,255,255,0.7);  --tab-button-hover-bg: #383838;  --tab-button-active-bg: #121212;  --card-bg: #121212;  --sidebar-bg: #121212;  --btn-hover-color: #787878;  --btn-color: rgba(255,255,255,0.7);  --btn-bg: #1f1f1f;  --text-bg-hover: #383838;  --light-grey: rgba(255,255,255,0.7);  --dark-grey: rgba(255,255,255,0.2);  --white: rgba(255,255,255,0.9);  --text-highlight-color: rgba(255,255,255,0.9);  --blockquote-color: rgba(255,255,255,0.7);  --blockquote-bg: #2c2c2c;  --reward-pop: #2c2c2c;  --toc-link-color: rgba(255,255,255,0.6);  --hl-color: rgba(255,255,255,0.7);  --hl-bg: #171717;  --hltools-bg: #1a1a1a;  --hltools-color: #90a4ae;  --hlnumber-bg: #171717;  --hlnumber-color: rgba(255,255,255,0.4);  --hlscrollbar-bg: #1f1f1f;  --hlexpand-bg: linear-gradient(180deg, rgba(23,23,23,0.6), rgba(23,23,23,0.9)); --timeline-bg: #1f1f1f;}";switch(e){case 1:document.getElementById("themeColor").innerText=a;break;case 2:document.getElementById("themeColor").innerText=o;break;default:document.getElementById("themeColor").innerText=a+o}},setThemeColor:(e,a,o)=>{document.getElementById("themeColor").innerText=`:root{--theme-color:rgb(${e}, ${a}, ${o})!important;--btn-bg:rgb(${e}, ${a}, ${o})!important;--btn-hover-color:rgba(${e}, ${a}, ${o},0.7)!important;--text-bg-hover:rgba(${e}, ${a}, ${o},0.7)!important;--km-toc-active:rgba(${e}, ${a}, ${o},0.7)!important;--km-toc-hover:rgba(${e}, ${a}, ${o},0.6)!important;}`},toggleConsole:()=>{$("#settingWindow").fadeToggle("fast"),$("#console-mask").fadeToggle("fast"),"none"!=$("#settingWindow").css("display")&&$("#settingWindow").css("display","flex")},showConsole:()=>{$("#settingWindow").fadeIn("fast"),$("#console-mask").fadeIn("fast"),"none"!=$("#settingWindow").css("display")&&$("#settingWindow").css("display","flex")},closeConsole:()=>{$("#settingWindow").fadeOut("fast"),$("#console-mask").fadeOut("fast"),"none"!=$("#settingWindow").css("display")&&$("#settingWindow").css("display","flex")},resetSettings:()=>{cloudchewieFn.removeData("blogBackground"),cloudchewieFn.removeData("enableStarBackground"),cloudchewieFn.removeData("isLeftAside"),cloudchewieFn.removeData("enableRightSide"),cloudchewieFn.removeData("enableAutoTheme"),cloudchewieFn.removeData("enableFixedNav"),cloudchewieFn.removeData("enableAutoColor"),cloudchewieFn.removeData("enableContextMenu"),cloudchewieFn.removeData("enableAPlayer"),window.location.reload()},setDefaultBackground:()=>{cloudchewieFn.removeData("blogBackground"),window.location.reload()},changeBackground:(e,a)=>{let o=document.getElementById("web_bg");"#"==e.charAt(0)?(o.style.backgroundColor=e,o.style.background="none"):o.style.background=e,a||cloudchewieFn.saveData("blogBackground",e)},toggleStarBackground:()=>{"true"==cloudchewieFn.loadData("enableStarBackground")?(cloudchewieFn.saveData("enableStarBackground","false"),$("#universe").hide()):(cloudchewieFn.saveData("enableStarBackground","true"),$("#universe").show())},changeAPlayerList:(e,a,o=!0)=>{if(window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].pause();cloudchewieFn.saveData("playlist",JSON.stringify({id:e,server:a})),$("meting-js").attr("id",e),$("meting-js").attr("server",a),o&&cloudchewieFn.changeMusicList(a,e)},toggleFullScreen:()=>{cloudchewieFn.isFullScreen()?(document.exitFullscreen(),$("#con-fullscreen").removeClass("checked")):(document.documentElement.requestFullscreen(),$("#con-fullscreen").addClass("checked"))},toggleAside:()=>{const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("enableAside","show",2):saveToLocal.set("enableAside","hide",2),e.toggle("hide-aside"),"hide"==cloudchewieFn.loadData("enableAside")?$("#con-toggleaside").addClass("checked"):$("#con-toggleaside").removeClass("checked")},switchAside:()=>{left?($("#aside-content").addClass("right"),$(".layout > div:first-child").addClass("left"),cloudchewieFn.saveData("isLeftAside","false")):($("aside-content").className="aside-content",$(".layout > div:first-child").className="",null!=$("#recent-posts")&&($("#recent-posts").className="recent-posts"),cloudchewieFn.saveData("isLeftAside","true")),left=!left},toggleRightSide:()=>{"true"==cloudchewieFn.loadData("enableRightSide")?(cloudchewieFn.saveData("enableRightSide","false"),$("#rightside").hide()):(cloudchewieFn.saveData("enableRightSide","true"),$("#rightside").show())},toggleAutoTheme:()=>{if("true"==cloudchewieFn.loadData("enableAutoTheme"))cloudchewieFn.saveData("enableAutoTheme","false"),$("#con-mode,.rightMenu-item:has(.fa-adjust)").show();else{cloudchewieFn.saveData("enableAutoTheme","true");var e=new Date;e.getHours()<=7||e.getHours()>=19?(activateDarkMode(),localStorage.removeItem("theme")):(activateLightMode(),localStorage.removeItem("theme")),$("#con-mode,.rightMenu-item:has(.fa-adjust)").hide()}},toggleFixedNav:()=>{"false"==cloudchewieFn.loadData("enableFixedNav")?(cloudchewieFn.saveData("enableFixedNav","true"),$("#page-header").addClass("nav-fixed nav-visible"),$("#name-container").show()):(cloudchewieFn.saveData("enableFixedNav","false"),$("#page-header").removeClass("nav-fixed nav-visible"),$("#name-container").hide())},toggleAutoColor:()=>{"true"==cloudchewieFn.loadData("enableAutoColor")?cloudchewieFn.saveData("enableAutoColor","false"):cloudchewieFn.saveData("enableAutoColor","true"),changeAutoColor(!1)},toggleContextMenu:()=>{"true"==cloudchewieFn.loadData("enableContextMenu")?(cloudchewieFn.saveData("enableContextMenu","false"),$("#con-rightmouse").removeClass("checked"),cloudchewieFn.bindContextMenu(!1,!0)):(cloudchewieFn.saveData("enableContextMenu","true"),$("#con-rightmouse").addClass("checked"),cloudchewieFn.bindContextMenu(!0,!0))},toggleAPlayer:()=>{const e=$("#nav-music");if(null==e||null==e.find("meting-js"))return;const a=e.find("meting-js").aplayer;"true"==cloudchewieFn.loadData("enableAPlayer")?(cloudchewieFn.saveData("enableAPlayer","false"),e.hide(),$("#con-music").hide(),$("#menu-music-toggle").hide(),$(".music-wrapper .aplayer").show(),a&&a.pause()):(cloudchewieFn.saveData("enableAPlayer","true"),$("#con-music").show(),$("#menu-music-toggle").show(),cloudchewieFn.isMusic()?e.hide():e.show())},resolveUrl:()=>{var e,a,o=document.getElementById("url-input").value;if(""!=o){if(isNaN(o)||(e=o),-1!=o.indexOf("music.163.com/#/playlist?id="))e=o.split("id=")[1].replace("/",""),a="netease";else if(-1!=o.indexOf("y.qq.com/n/ryqq/playlist/"))e=o.split("playlist/")[1].replace("/",""),a="tencent";else if(-1!=o.indexOf("https://www.kugou.com/songlist/"))e=o.split("songlist/")[1].replace("/",""),a="kugou";else{if(-1==o.indexOf("https://music.91q.com/songlist/"))return $("#url-btn").html("解析失败"),$("#url-btn").removeClass("success"),void $("#url-btn").addClass("fail");e=o.split("songlist/")[1].replace("/",""),a="baidu"}var t="https://api.i-meto.com/meting/api?server="+a+"&type=playlist&id="+e,n=new XMLHttpRequest;n.onreadystatechange=()=>{4===n.readyState&&(n.status>=200&&n.status<300||304===n.status)&&(0!=JSON.parse(n.responseText).length?($("#url-btn").html("解析成功"),$("#url-btn").addClass("success"),$("#url-btn").removeClass("fail"),consoleFn.changeAPlayerList(e,a,!0)):($("#url-btn").html("解析失败"),$("#url-btn").removeClass("success"),$("#url-btn").addClass("fail")))},n.open("get",t,!0),n.send(null)}}},loadSetting=()=>{$("#backer").hide(),$(".asetting").hide(),$("#settingWindow").hide(),document.getElementById("settingStyle").innerText="\n  *,*:not(.card-info)::before,*::after{\n      -webkit-backdrop-filter: none!important;\n      backdrop-filter: none!important;\n      -webkit-filter: none!important;\n      filter: none!important;\n  }",null==cloudchewieFn.loadData("enableAutoColor")&&cloudchewieFn.saveData("enableAutoColor","false"),"true"==cloudchewieFn.loadData("enableAutoColor")&&(document.getElementById("con-toggleAutoColor").checked=!0,GLOBAL_CONFIG_SITE.isPost&&changeAutoColor(!0)),GLOBAL_CONFIG_SITE.isPost||consoleFn.setDefaultThemeColor(3),null==cloudchewieFn.loadData("enableFixedNav")&&cloudchewieFn.saveData("enableFixedNav","false"),"false"==cloudchewieFn.loadData("enableFixedNav")?($("#page-header").removeClass("nav-fixed nav-visible"),$("#name-container").hide()):($("#name-container").show(),$("#page-header").addClass("nav-fixed nav-visible"),document.getElementById("con-toggleFixedNav").checked=!0),null==cloudchewieFn.loadData("enableContextMenu")&&cloudchewieFn.saveData("enableContextMenu","true"),"true"==cloudchewieFn.loadData("enableContextMenu")?($("#con-rightmouse").addClass("checked"),cloudchewieFn.bindContextMenu(!0,!1)):($("#con-rightmouse").removeClass("checked"),cloudchewieFn.bindContextMenu(!1,!1)),null==cloudchewieFn.loadData("enableAPlayer")&&cloudchewieFn.saveData("enableAPlayer","false");const e=$("#nav-music");if(null!=e&&null!=e.find("meting-js")){const a=e.find("meting-js").aplayer;"true"==cloudchewieFn.loadData("enableAPlayer")?("/music/"!=location.pathname?e.show():e.hide(),$(".music-wrapper .aplayer").show(),document.getElementById("con-toggleAPlayer").checked=!0):(e.hide(),a&&a.pause())}null==cloudchewieFn.loadData("enableRightSide")&&cloudchewieFn.saveData("enableRightSide","true"),"false"==cloudchewieFn.loadData("enableRightSide")?$("#rightside").hide():($("#rightside").show(),document.getElementById("con-toggleRightSide").checked=!0);try{let e=cloudchewieFn.loadData("blogBackground",1440);e?consoleFn.changeBackground(e,1):cloudchewieFn.removeData("blogBackground")}catch(e){cloudchewieFn.removeData("blogBackground")}if("true"==cloudchewieFn.loadData("enableAutoTheme")){document.getElementById("con-toggleAutoTheme").checked=!0,$("#con-mode,.rightMenu-item:has(.fa-adjust)").hide();var a=new Date;a.getHours()<=7||a.getHours()>=19?(consoleFn.activateDarkMode(),cloudchewieFn.removeData("theme")):(consoleFn.activateLightMode(),cloudchewieFn.removeData("theme"))}if(null==cloudchewieFn.loadData("enableStarBackground")&&cloudchewieFn.saveData("enableStarBackground","true"),"true"==cloudchewieFn.loadData("enableStarBackground")?($("#universe").show(),document.getElementById("con-toggleStarBackground").checked=!0):($("#universe").hide(),document.getElementById("con-toggleStarBackground").checked=!1),null!=cloudchewieFn.loadData("playlist")){var o=JSON.parse(cloudchewieFn.loadData("playlist"));consoleFn.changeAPlayerList(o.id,o.server,!1)}document.getElementById("console-mask").addEventListener("click",consoleFn.closeConsole),document.getElementById("console-button").addEventListener("click",consoleFn.showConsole),window.onresize=()=>{cloudchewieFn.isFullScreen()||$("#con-fullscreen").removeClass("checked")},$(document).ready((function(){new MutationObserver((function(e){e.forEach((function(e){"data-theme"===e.attributeName&&("dark"==$("html").attr("data-theme")?consoleFn.setDefaultThemeColor(2):GLOBAL_CONFIG_SITE.isPost&&changeAutoColor(!1))}))})).observe($("html")[0],{attributes:!0})}))};function changeAutoColor(e){if("true"==cloudchewieFn.loadData("enableAutoColor")&&null!=document.querySelector("#page-header")&&null!=document.querySelector("#page-header").style.backgroundImage&&null!=document.querySelector("#page-header").style.backgroundImage.split('url("')[1]){const e=new ColorThief,o=new Image,t=new XMLHttpRequest;var a=document.querySelector("#page-header").style.backgroundImage.split('url("')[1].split('")')[0];t.onload=function(){let a=URL.createObjectURL(this.response);o.onload=function(){let t=e.getColor(o);consoleFn.setThemeColor(t[0],t[1],t[2]),"dark"==$("html").attr("data-theme")&&consoleFn.setDefaultThemeColor(2),URL.revokeObjectURL(a)},o.src=a},t.open("GET",a,!0),t.responseType="blob",t.send()}else e||consoleFn.setDefaultThemeColor(3)}document.addEventListener("pjax:complete",loadSetting),document.addEventListener("DOMContentLoaded",loadSetting);