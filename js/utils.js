var adjectives=["美丽的","英俊的","聪明的","勇敢的","可爱的","慷慨的","善良的","可靠的","开朗的","成熟的","稳重的","真诚的","幽默的","豁达的","有趣的","活泼的","优雅的","敏捷的","温柔的","温暖的","敬业的","细心的","耐心的","深沉的","朴素的","含蓄的","率直的","开放的","务实的","坚强的","自信的","谦虚的","文静的","深刻的","纯真的","朝气蓬勃的","慎重的","大方的","顽强的","迷人的","机智的","善解人意的","富有想象力的","有魅力的","独立的","好奇的","干净的","宽容的","尊重他人的","体贴的","守信的","有耐性的","有责任心的","有担当的","有远见的","有智慧的","有眼光的","有冒险精神的","有爱心的","有同情心的","喜欢思考的","喜欢学习的","具有批判性思维的","善于表达的","善于沟通的","善于合作的","善于领导的","有激情的","有幽默感的","有思想的","有个性的","有正义感的","有责任感的","有创造力的","有想象力的","有艺术细胞的","有团队精神的","有协调能力的","有决策能力的","有组织能力的","有学习能力的","有执行能力的","有分析能力的","有逻辑思维的","有创新能力的","有专业素养的","有商业头脑的"],vegetablesAndFruits=["萝卜","白菜","芹菜","生菜","青椒","辣椒","茄子","豆角","黄瓜","西红柿","洋葱","大蒜","土豆","南瓜","豆腐","韭菜","花菜","西兰花","蘑菇","金针菇","苹果","香蕉","橙子","柠檬","猕猴桃","草莓","葡萄","桃子","杏子","李子","石榴","西瓜","哈密瓜","蜜瓜","樱桃","蓝莓","柿子","橄榄","柚子","火龙果"];const cloudchewieFn={day_night_count:0,isReadMode:!1,saveData:function(e,t){localStorage.setItem(e,JSON.stringify({time:Date.now(),data:t}))},removeData:function(e){localStorage.removeItem(e)},loadData:function(e,t){let n=JSON.parse(localStorage.getItem(e));if(n){let e=Date.now()-n.time;if(e<60*t*1e3&&e>-1)return n.data}return n?n.data:void 0},setCookie:(e,t,n=365)=>{var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var a="expires="+o.toGMTString();document.cookie=e+"="+t+"; "+a},delCookie:e=>{var t=new Date;t.setTime(t.getTime()-1);var n=getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},getCookie:e=>{for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o].trim();if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},isHome:function(){return"/"==window.location.pathname},isMusic:function(){return"/music/"==window.location.pathname},isNowtime:function(){return"/nowtime/"==window.location.pathname},isPost:function(){return-1!=window.location.pathname.indexOf("/posts/")},isGuestbook:function(){return"/guestbook/"==window.location.pathname},isFullScreen:()=>{var e=document.fullScreen||null!==document.fullscreenElement;return void 0===e&&(e=!1),e},addScript:(e,t,n)=>{if(document.getElementById(e))return n?n():void 0;let o=document.createElement("script");o.src=t,o.id=e,n&&(o.onload=n),document.head.appendChild(o)},copy:function(e,t){var n=new ClipboardJS(e,{text:function(e){return t}});n.on("success",(function(e){e.clearSelection()})),n.on("error",(function(e){}))},copySelect:()=>{document.execCommand("Copy",!1,null),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)},insertAtCursor:(e,t)=>{if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=t,sel.select();else if(e.selectionStart||"0"==e.selectionStart){var n=e.selectionStart,o=e.selectionEnd,a=e.scrollTop;e.value=e.value.substring(0,n)+t+e.value.substring(o,e.value.length),a>0&&(e.scrollTop=a),e.focus(),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}else e.value+=t,e.focus()},goToPage:()=>{let e=document.querySelector("#textnumer");e&&(e.addEventListener("input",(()=>{let t=document.querySelectorAll(".page-number"),n=t[t.length-1].innerHTML;Number(e.value)>n&&(e.value=n)})),e.addEventListener("keyup",(t=>{"Enter"==t.key&&""!=e.value&&"0"!=e.value&&pjax.loadUrl("1"==e.value?"/":`/page/${e.value}/`)})))},debounce:function(e,t,n){let o;return function(){const a=this,c=arguments,l=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||e.apply(a,c)}),t),l&&e.apply(a,c)}},throttle:function(e,t,n){let o,a,c,l=0;n||(n={});const i=function(){l=!1===n.leading?0:(new Date).getTime(),o=null,e.apply(a,c),o||(a=c=null)};return function(){const s=(new Date).getTime();l||!1!==n.leading||(l=s);const r=t-(s-l);a=this,c=arguments,r<=0||r>t?(o&&(clearTimeout(o),o=null),l=s,e.apply(a,c),o||(a=c=null)):o||!1===n.trailing||(o=setTimeout(i,r))}},fadeIn:(e,t)=>{e.style.cssText=`display:block;animation: to_show ${t}s`},fadeOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.cssText="display: none; animation: '' ",e.removeEventListener("animationend",t)})),e.style.animation=`to_hide ${t}s`},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)})),e.style.animation=t},sidebarPaddingR:()=>{const e=window.innerWidth,t=document.body.clientWidth,n=e-t;e!==t&&(document.body.style.paddingRight=n+"px")},snackbarShow:(e,t=!1,n=2e3)=>{const{position:o,bgLight:a,bgDark:c}=GLOBAL_CONFIG.Snackbar,l="light"===document.documentElement.getAttribute("data-theme")?a:c;Snackbar.show({text:e,backgroundColor:l,showAction:t,duration:n,pos:o,customClass:"snackbar-css"})},snackbarShowLong:(e,t=!1,n=1e4)=>{const{position:o,bgLight:a,bgDark:c}=GLOBAL_CONFIG.Snackbar,l="light"===document.documentElement.getAttribute("data-theme")?a:c;Snackbar.show({text:e,backgroundColor:l,showAction:t,duration:n,pos:o,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const n=new Date,o=new Date(e),a=n.getTime()-o.getTime(),c=36e5,l=24*c;let i;if(t){const e=a/2592e6,t=a/l,n=a/c,s=a/6e4;i=e>12?o.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+GLOBAL_CONFIG.date_suffix.month:t>=1?parseInt(t)+" "+GLOBAL_CONFIG.date_suffix.day:n>=1?parseInt(n)+" "+GLOBAL_CONFIG.date_suffix.hour:s>=1?parseInt(s)+" "+GLOBAL_CONFIG.date_suffix.min:GLOBAL_CONFIG.date_suffix.just}else i=parseInt(a/l);return i},loadComment:(e,t)=>{if("IntersectionObserver"in window){const n=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),n.disconnect())}),{threshold:[0]});n.observe(e)}else t()},scrollToDest:(e,t=500)=>{const n=window.scrollY;if(n>e&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});let o=null;e=+e,window.requestAnimationFrame((function a(c){o=o||c;const l=c-o;n<e?window.scrollTo(0,(e-n)*l/t+n):window.scrollTo(0,n-(n-e)*l/t),l<t?window.requestAnimationFrame(a):window.scrollTo(0,e)}))},scrollToTop:()=>{cloudchewieFn.scrollToDest(0,500)},scrollToBottom:()=>{cloudchewieFn.scrollToDest(document.body.scrollHeight,500)},getParents:(e,t)=>{for(;e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null},siblings:(e,t)=>[...e.parentNode.children].filter((n=>t?n!==e&&n.matches(t):n!==e)),wrap:(e,t,n)=>{const o=document.createElement(t);for(const[e,t]of Object.entries(n))o.setAttribute(e,t);e.parentNode.insertBefore(o,e),o.appendChild(e)},unwrap:e=>{const t=e.parentNode;t!==document.body&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,n=e.offsetParent;for(;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if("mediumZoom"===t){const t=mediumZoom(e);t.on("open",(e=>{const n="dark"===document.documentElement.getAttribute("data-theme")?"#121212":"#fff";t.update({background:n})}))}"fancybox"===t&&(e.forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,n=e.title||e.alt||"";cloudchewieFn.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":n,"data-thumb":t,"data-download-src":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{autoStart:!1},helpers:{overlay:{locked:!1}},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","download","thumbs","fullscreen","close"]}}}),window.fancyboxRun=!0))},initJustifiedGallery:function(e){e.forEach((function(e){cloudchewieFn.isHidden(e)||fjGallery(e,{itemSelector:".fj-gallery-item",rowHeight:220,gutter:4,onJustify:function(){this.$container.style.opacity="1"}})}))},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getStyle:(e,t)=>window.getComputedStyle?getComputedStyle(e,null)[t]:e.currentStyle[t],resizeTop:()=>{var e=(null!=document.getElementById("content-inner")?document.getElementById("content-inner").clientWidth:0)-Number(cloudchewieFn.getStyle(document.getElementById("content-inner"),"paddingLeft").replace(/\s+|px/gi,""))-Number(cloudchewieFn.getStyle(document.getElementById("content-inner"),"paddingRight").replace(/\s+|px/gi,""));try{document.getElementById("top").setAttribute("style","width:"+e.toString()+"px")}catch(e){}},fixNav:()=>{if("true"==cloudchewieFn.loadData("enableFixedNav")){$("#name-container").show();var e=$(window).scrollTop();$(window).scroll((function(){if("true"==cloudchewieFn.loadData("enableFixedNav")){var t=$(window).scrollTop();t>e?$("#page-header").addClass("nav-down"):$("#page-header").removeClass("nav-down"),e=t}})),"Cloudchewie"!=document.title.split(" | Cloudchewie")[0]?document.getElementById("page-name").innerText=document.title.split(" | Cloudchewie")[0]:document.getElementById("page-name").innerText="首页"}else $("#name-container").hide()},isInViewPortOfOne:e=>{if(null==e)return!1;if("none"==window.getComputedStyle(e).getPropertyValue("display"))return!1;const t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return e.offsetTop-document.documentElement.scrollTop<=t},changeDataType:()=>{var e=window.location.pathname.split("/");$("body").attr("data-type",e[1]),"tags"==e[1]&&e.length>3&&$("body").attr("data-type","cloudchewie")},alertTooLow:()=>{void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.browser_version_low)},browserVersion:()=>{var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=(e.indexOf("Trident")>-1&&e.indexOf("rv:11.0"),e.indexOf("Edge")>-1&&!t),o=e.indexOf("Firefox")>-1,a=e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,c=e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1&&-1==e.indexOf("Edge")&&-1==e.indexOf("OPR");e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome")&&-1==e.indexOf("Edge")&&e.indexOf("OPR");n?e.split("Edge/")[1].split(".")[0]<90&&cloudchewieFn.alertTooLow():o?e.split("Firefox/")[1].split(".")[0]<90&&cloudchewieFn.alertTooLow():a?e.split("OPR/")[1].split(".")[0]<80&&cloudchewieFn.alertTooLow():c&&e.split("Chrome/")[1].split(".")[0]<90&&cloudchewieFn.alertTooLow()},checkVersion:()=>{1!=cloudchewieFn.getCookie("browser_version_checked")&&(cloudchewieFn.browserVersion(),cloudchewieFn.setCookie("browser_version_checked",!0,1))},bindContextMenu:(e,t)=>{e&&document.body.clientWidth>900?(t&&cloudchewieFn.snackbarShow("已启用自定义右键菜单,可使用Ctrl+右键单击呼出默认右键菜单"),window.oncontextmenu=function(e){if(e.ctrlKey||document.body.clientWidth<900)return!0;document.querySelectorAll(".rightMenu-line").forEach((e=>{$(e).hide()})),document.getSelection().toString()&&$("#menu-text").show(),document.getElementById("post")&&($("#menu-post").show(),$("#menu-other").show()),$("#menu-global").show();var t=window.document.body;"A"==(t=e.target).tagName&&($("#menu-to").show(),cloudchewieFn.open=function(){location.href=t.href},cloudchewieFn.openWithNewTab=function(){window.open(t.href)},cloudchewieFn.copyLink=function(){let e=t.href,n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),document.body.removeChild(n),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)}),"IMG"==t.tagName?($("#menu-img").show(),cloudchewieFn.openWithNewTab=function(){window.open(t.src)},cloudchewieFn.downloadImage=function(){t.click()},cloudchewieFn.click=function(){t.click()},cloudchewieFn.copyLink=function(){let e=t.src,n=document.createElement("textarea");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),document.body.removeChild(n),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)}):"TEXTAREA"!=t.tagName&&"INPUT"!=t.tagName||($("#menu-paste").show(),cloudchewieFn.paste=function(){navigator.permissions.query({name:"clipboard-read"}).then((e=>{"granted"==e.state||"prompt"==e.state?navigator.clipboard.readText().then((e=>{cloudchewieFn.insertAtCursor(t,e)})):alert("请允许读取剪贴板！")}))});let n=e.clientX+10,o=e.clientY,a=$("#rightMenu").width(),c=$("#rightMenu").height();n+a>window.innerWidth&&(n-=a+10),o+c>window.innerHeight&&(o-=o+c-window.innerHeight);var l=!0;return document.querySelectorAll(".rightMenu-line").forEach((e=>{"none"!=$(e).css("display")&&(l=!1)})),l&&$("#menu-general").show(),cloudchewieFn.isReadMode&&document.querySelectorAll(".rightMenu-line").forEach((e=>{$(e).hide()})),cloudchewieFn.toggleRightMenu(!0,o,n),!1},window.addEventListener("click",(function(){cloudchewieFn.toggleRightMenu(!1)}))):window.oncontextmenu=function(){return!0}},toggleRightMenu:(e,t=0,n=0)=>{let o=$("#rightMenu");o.css("top",t+"px").css("left",n+"px"),e?o.show():o.hide()},addLongtabListener:(e,t)=>{let n=0;e.ontouchstart=()=>{n=0,n=setTimeout((()=>{t(),n=0}),380)},e.ontouchmove=()=>{clearTimeout(n),n=0},e.ontouchend=()=>{n&&clearTimeout(n)}},addPhotoFigcaption:()=>{document.querySelectorAll("#article-container img").forEach((e=>{const t=e.parentNode,n=e.title||e.alt;if(n&&!t.parentNode.classList.contains("justified-gallery")){const o=document.createElement("div");o.className="img-alt is-center",o.textContent=n,t.insertBefore(o,e.nextSibling)}}))},runJustifiedGallery:e=>{if(e.forEach((e=>{e.querySelectorAll("img").forEach((e=>{const t=e.getAttribute("data-lazy-src");t&&(e.src=t),cloudchewieFn.wrap(e,"div",{class:"fj-gallery-item"})}))})),window.fjGallery)return void setTimeout((()=>{cloudchewieFn.initJustifiedGallery(e)}),100);const t=document.createElement("link");t.rel="stylesheet",t.href=GLOBAL_CONFIG.source.justifiedGallery.css,document.body.appendChild(t),getScript(`${GLOBAL_CONFIG.source.justifiedGallery.js}`).then((()=>{cloudchewieFn.initJustifiedGallery(e)}))},runLightbox:()=>{cloudchewieFn.loadLightbox(document.querySelectorAll("#article-container img:not(.no-lightbox):not(.air-conditioner-main-content-bottom-logo)"))},toggleReadMode:()=>{const e=()=>{t.classList.remove("read-mode"),document.getElementById("post").classList.remove("read-mode"),n.remove(),n.removeEventListener("click",e),cloudchewieFn.isReadMode=!1,$(".aplayer").show(),$("#con-readmode").removeClass("checked"),$(document.getElementById("post-meta")).show()},t=document.body;t.classList.add("read-mode"),document.getElementById("post").classList.add("read-mode");const n=document.createElement("button");n.type="button",n.className="fas fa-sign-out-alt exit-readmode",n.removeEventListener("click",e),t.appendChild(n),consoleFn.closeConsole(),$(document.getElementById("post-meta")).hide(),cloudchewieFn.isReadMode=!0,$("#con-readmode").addClass("checked"),$(".aplayer").hide(),n.addEventListener("click",e)},toggleDarkMode:()=>{const e="dark"===document.documentElement.getAttribute("data-theme")?"dark":"light";$("#menus > div.menus_items > div:nth-child(7) > a > span"),$("#sidebar-menus > div.menus_items > div:nth-child(7) > a > span");"light"===e?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),cloudchewieFn.day_night_count++,void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200)},copyArticleLink:function(){let e=window.location.href,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShow(GLOBAL_CONFIG.Snackbar.copy_success)},translate:()=>{document.getElementById("con-translate").click()},toggleSideBtn:e=>{const t=document.getElementById("rightside-button-list").classList;t.toggle("show"),e.classList.contains("show")&&(t.add("status"),setTimeout((()=>{t.remove("status")}),300)),e.classList.toggle("show")},toggleAside:()=>{if(!cloudchewieFn.isHome()){const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("enableAside","show",2):saveToLocal.set("enableAside","hide",2),e.toggle("hide-aside"),"hide"==saveToLocal.get("enableAside")?$("#con-toggleaside").addClass("checked"):$("#con-toggleaside").removeClass("checked")}},toggleMobileToc:()=>{"0"===window.getComputedStyle(document.getElementById("card-toc")).getPropertyValue("opacity")?(window.mobileToc.open(),$("#mobile-toc-button").addClass("checked")):(window.mobileToc.close(),$("#mobile-toc-button").removeClass("checked"))},toggleSidebar:()=>{document.querySelectorAll("#sidebar-menus .site-page.group").forEach((e=>{e.addEventListener("click",(e=>{e.target.classList.toggle("hide")}))}))},enlargeEmoji:()=>{let e=1,t="",n=document.createElement("div"),o=document.querySelector("body");n.id="owo-big",o.appendChild(n),new MutationObserver((a=>{for(let c=0;c<a.length;c++){let l=a[c].addedNodes,i="";if(2==l.length&&"OwO-body"==l[1].className)i=l[1];else{if(1!=l.length||"tk-comment"!=l[0].className)continue;i=l[0]}document.body.clientWidth<=768&&i.addEventListener("contextmenu",(e=>e.preventDefault())),i.onmouseover=a=>{e&&"IMG"==a.target.tagName&&(e=0,t=setTimeout((()=>{let e=3*a.target.clientHeight,t=3*a.target.clientWidth,c=a.x-a.offsetX-(t-a.target.clientWidth)/2,l=a.y-a.offsetY;c+t>o.clientWidth&&(c-=c+t-o.clientWidth+10),c<0&&(c=10),n.style.cssText=`display:flex; height:${e}px; width:${t}px; left:${c}px; top:${l}px;`,n.innerHTML=`<img src="${a.target.src}">`}),300))},i.onmouseout=()=>{n.style.display="none",e=1,clearTimeout(t)}}})).observe(document.getElementById("post-comment"),{subtree:!0,childList:!0})},switchComments:()=>{let e=!1;const t=document.querySelector("#comment-switch > .switch-btn");t&&t.addEventListener("click",(()=>{this.classList.toggle("move"),document.querySelectorAll("#post-comment > .comment-wrap > div").forEach((e=>{cloudchewieFn.isHidden(e)?e.style.cssText="display: block;animation: tabshow .5s":e.style.cssText="display: none;animation: ''"})),e||"function"!=typeof loadOtherComment||(e=!0,loadOtherComment())}))},enhanceTwikoo:()=>{if(document.getElementById("site-title")&&document.getElementById("site-title").innerHTML.trim()==document.querySelector("#menus > div.menus_items > div:nth-child(5) > a > span").innerHTML.trim()){document.querySelector("#post-comment > div.comment-head > div > span").innerHTML="  留言板  ";setInterval((()=>{document.querySelectorAll(".el-textarea__inner").forEach((e=>{"请输入您的留言"!=e.getAttribute("placeholder")&&e.setAttribute("placeholder","请输入您的留言")})),document.querySelectorAll("#twikoo > div.tk-comments > div.tk-comments-container > div.tk-comments-no > span").forEach((e=>{"没有评论"==e.innerHTML&&(e.innerHTML="没有留言")})),document.querySelectorAll("#twikoo > div.tk-comments > div.tk-comments-container > div.tk-comments-title > span.tk-comments-count > span:nth-child(2)").forEach((e=>{" 条评论"==e.innerHTML&&(e.innerHTML=" 条留言")}))}),300)}document.getElementById("post-comment")&&setInterval((()=>{if(document.getElementById("CommentaryRegulations")){var e=document.createElement("div");e.id="CommentaryRegulations",e.classList.add("tk-submit-action-icon"),e.innerHTML="<a href='/term/' target='_blank' title='评论条例'></a>",document.querySelector(".tk-row-actions-start")&&document.querySelector(".tk-row-actions-start").appendChild(e)}}),300)},addRandomCommentInfo:function(){const e=`${adjectives[Math.floor(Math.random()*adjectives.length)]}${vegetablesAndFruits[Math.floor(Math.random()*vegetablesAndFruits.length)]}`;!function(){for(var t=["#author","input[name='comname']","#inpName","input[name='author']","#ds-dialog-name","#name","input[name='nick']","#comment_author"],n=["#mail","#email","input[name='commail']","#inpEmail","input[name='email']","#ds-dialog-email","input[name='mail']","#comment_email"],o=0;o<t.length;o++){var a=document.querySelector(t[o]);if(null!=a){a.value=e,a.dispatchEvent(new Event("input")),a.dispatchEvent(new Event("change"));break}}for(var c=0;c<n.length;c++){var l=document.querySelector(n[c]);if(null!=l){l.value=visitorMail,l.dispatchEvent(new Event("input")),l.dispatchEvent(new Event("change"));break}}}();var t=document.getElementsByClassName("el-textarea__inner")[0];t.focus(),t.setSelectionRange(-1,-1)},scrollCategoryBarToRight:function(){const e=document.getElementById("catalog-list"),t=document.getElementById("category-bar-next");if(e&&t){const n=e.clientWidth;e.scrollLeft+e.clientWidth+1>=e.scrollWidth?(e.scroll({left:0,behavior:"smooth"}),t.innerHTML='<i class="cloudchewiefont cloudchewie-icon-angle-double-right"></i>'):e.scrollBy({left:n,behavior:"smooth"})}},categoriesBarActive:function(){const e=decodeURIComponent(window.location.pathname),t=document.getElementById("category-bar");if(t)if("/"===e)t.querySelector("#首页").classList.add("select");else{if(!/\/categories\/.*?\//.test(e))return;const n=e.split("/")[2];t.querySelector(`#${n}`).classList.add("select")}},topCategoriesBarScroll:function(){const e=document.getElementById("category-bar-items");e&&e.addEventListener("mousewheel",(function(e){const t=-e.wheelDelta/2;this.scrollLeft+=t,e.preventDefault()}))},scrollByMouseWheel:function(e,t){e.addEventListener("mousewheel",(function(t){e.scrollLeft-=t.wheelDelta/2,t.preventDefault()}),{passive:!1}),t&&(t.classList.add("selected"),e.scrollLeft=t.offsetLeft-e.offsetLeft-(e.offsetWidth-t.offsetWidth)/2)},catalogActive:function(){const e=document.getElementById("catalog-list");if(e){const t=document.getElementById(decodeURIComponent(window.location.pathname));cloudchewieFn.scrollByMouseWheel(e,t)}},tagsPageActive:function(){const e=document.getElementById("tag-page-tags");if(e){const t=document.getElementById(decodeURIComponent(window.location.pathname));cloudchewieFn.scrollByMouseWheel(e,t)}},scrollFunction:()=>{const e=document.getElementById("rightside"),t=window.innerHeight+56;if(document.body.scrollHeight<=t&&"/nowtime/"!=location.pathname&&"/guestbook/"!=location.pathname)return void(e.style.cssText="opacity: 1; transform: translateX(-60px)");let n=0,o=!0;const a=document.getElementById("page-header"),c="function"==typeof chatBtnHide,l="function"==typeof chatBtnShow;window.scrollCollect=()=>cloudchewieFn.throttle((i=>{const s=window.scrollY||document.documentElement.scrollTop,r=function(e){const t=e>n;return n=e,t}(s);s<10?a.classList.add("nav-top"):a.classList.remove("nav-top"),s>56?("false"==cloudchewieFn.loadData("enableFixedNav")&&(r?(a.classList.contains("nav-visible")&&a.classList.remove("nav-visible"),l&&!0===o&&(chatBtnHide(),o=!1)):(a.classList.contains("nav-visible")||a.classList.add("nav-visible"),c&&!1===o&&(chatBtnShow(),o=!0)),a.classList.add("nav-fixed")),"0"===window.getComputedStyle(e).getPropertyValue("opacity")&&"true"==cloudchewieFn.loadData("enableRightSide")&&(e.style.cssText="opacity: 0.8; transform: translateX(-60px)")):(0===s&&"false"==cloudchewieFn.loadData("enableFixedNav")&&a.classList.remove("nav-fixed","nav-visible"),"true"==cloudchewieFn.loadData("enableRightSide")&&(e.style.cssText="opacity: ''; transform: ''")),document.body.scrollHeight<=t&&"true"==cloudchewieFn.loadData("enableRightSide")&&(e.style.cssText="opacity: 0.8; transform: translateX(-60px)")}),200)(),window.addEventListener("scroll",window.scrollCollect)},scrollFunctionOfToc:()=>{const e=GLOBAL_CONFIG_SITE.isToc,t=GLOBAL_CONFIG.isAnchor,n=document.getElementById("article-container");if(!n||!e&&!t)return;let o,a,c,l,i;if(e){const e=document.getElementById("card-toc");a=e.getElementsByClassName("toc-content")[0],o=a.querySelectorAll(".toc-link");const t=e.querySelector(".toc-percentage");i=a.classList.contains("is-expand"),c=e=>{const o=n.clientHeight,a=document.documentElement.clientHeight,c=(e-n.offsetTop)/(o>a?o-a:document.documentElement.scrollHeight-a),l=Math.round(100*c),i=l>100?100:l<=0?0:l;t.textContent=i},window.mobileToc={open:()=>{e.style.cssText="animation: toc-open .3s; opacity: 1; right: 55px"},close:()=>{e.style.animation="toc-close .2s",setTimeout((()=>{e.style.cssText="opacity:''; animation: ''; right: ''"}),100)}},a.addEventListener("click",(e=>{e.preventDefault();const t=e.target.classList;if(t.contains("toc-content"))return;const n=t.contains("toc-link")?e.target:e.target.parentElement;cloudchewieFn.scrollToDest(cloudchewieFn.getEleTop(document.getElementById(decodeURI(n.getAttribute("href")).replace("#",""))),300),window.innerWidth<900&&(window.mobileToc.close(),$("#mobile-toc-button").removeClass("checked"))})),l=e=>{const t=e.getBoundingClientRect().top,n=a.scrollTop;t>document.documentElement.clientHeight-100&&(a.scrollTop=n+150),t<100&&(a.scrollTop=n-150)}}const s=n.querySelectorAll("h1,h2,h3,h4,h5,h6");let r="";window.resolveTocScrollFunction=()=>cloudchewieFn.throttle((()=>{const n=window.scrollY||document.documentElement.scrollTop;e&&c(n),(n=>{if(0===n)return!1;let c="",d="";if(s.forEach(((e,t)=>{if(n>cloudchewieFn.getEleTop(e)-80){const n=e.id;c=n?"#"+encodeURI(n):"",d=t}})),r!==d&&(t&&cloudchewieFn.updateAnchor(c),r=d,e)){if(a.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")})),""===c)return;const e=o[d];if(e.classList.add("active"),setTimeout((()=>{l(e)}),0),i)return;let t=e.parentNode;for(;!t.matches(".toc");t=t.parentNode)t.matches("li")&&t.classList.add("active")}})(n)}),100)(),window.addEventListener("scroll",resolveTocScrollFunction)},browsingProgress:()=>{window.addEventListener("scroll",(()=>{let e=document.documentElement.scrollTop||window.scrollY,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,n=Math.round(e/t*100),o=document.querySelector("#go-up");down=document.querySelector("#go-down"),null!=o&&(n<=95?(o.childNodes[0].style.display="none",o.childNodes[1].style.display="block",o.childNodes[1].childNodes[0].innerHTML=n):(o.childNodes[1].style.display="none",o.childNodes[0].style.display="block")),n<=95&&document.documentElement.scrollTop>20?down.style.display="block":down.style.display="none",cloudchewieFn.isInViewPortOfOne(document.getElementById("post-comment"))?$("#to_comment").hide():$("#to_comment").show(),cloudchewieFn.percentageScrollFn(e)})),document.documentElement.scrollTop>20?document.querySelector("#go-down").style.display="block":document.querySelector("#go-down").style.display="none"},qrcodeCreate:function(){if(document.getElementById("qrcode")){document.getElementById("qrcode").innerHTML="";new QRCode(document.getElementById("qrcode"),{text:window.location.href,width:250,height:250,colorDark:"#000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}},percentageScrollFn:e=>{const t=document.getElementById("percent"),n=document.getElementById("nav-totop");let o=document.getElementById("body-wrap").clientHeight,a=document.getElementById("post-comment")||document.getElementById("footer");const c=document.documentElement.clientHeight,l=e/(o>c?o-c:document.documentElement.scrollHeight-c),i=Math.round(100*l),s=i>100?100:i<=0?1:i;t.textContent=s,(cloudchewieFn.isInViewPortOfOne(a)||s>90)&&document.documentElement.scrollTop>20?(n.classList.add("long"),t.textContent="回到顶部",document.body.clientWidth<=768&&(document.getElementById("search-button").style.display="none")):(n.classList.remove("long"),t.textContent=s,setTimeout((()=>{document.getElementById("search-button").style.display="inline"}),300))},addCopyright:()=>{const e=GLOBAL_CONFIG.copyright;document.body.oncopy=t=>{let n;t.preventDefault();const o=window.getSelection(0).toString();return n=o.length>e.limitCount?o+"\n\n\n"+e.languages.author+"\n"+e.languages.link+window.location.href+"\n"+e.languages.source+"\n"+e.languages.info:o,t.clipboardData?t.clipboardData.setData("text",n):window.clipboardData.setData("text",n)}},addRuntime:()=>{const e=document.getElementById("runtimeshow");if(e){const t=e.getAttribute("data-publishDate");e.innerText=cloudchewieFn.diffDate(t)+" "+GLOBAL_CONFIG.runtime}},addLastPushDate:()=>{const e=document.getElementById("last-push-date");if(e){const t=e.getAttribute("data-lastPushDate");e.innerText=cloudchewieFn.diffDate(t,!0)}},addTableWrap:()=>{const e=document.querySelectorAll("#article-container :not(.highlight) > table, #article-container > table");e.length&&e.forEach((e=>{cloudchewieFn.wrap(e,"div",{class:"table-wrap"})}))},clickFnOfTagHide:()=>{const e=document.querySelectorAll("#article-container .hide-button");e.length&&e.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target;t.classList.add("open");const n=t.nextElementSibling.querySelectorAll(".fj-gallery");n.length&&cloudchewieFn.initJustifiedGallery(n)}))}))},clickFnOfTabs:()=>{document.querySelectorAll("#article-container .tab > button").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target,n=t.parentNode;if(!n.classList.contains("active")){const e=n.parentNode.nextElementSibling,o=cloudchewieFn.siblings(n,".active")[0];o&&o.classList.remove("active"),n.classList.add("active");const a=t.getAttribute("data-href").replace("#","");[...e.children].forEach((e=>{e.id===a?e.classList.add("active"):e.classList.remove("active")}));const c=e.querySelectorAll(`#${a} .fj-gallery`);c.length>0&&cloudchewieFn.initJustifiedGallery(c)}}))}))},tabToTop:()=>{document.querySelectorAll("#article-container .tabs .tab-to-top").forEach((e=>{e.addEventListener("click",(e=>{cloudchewieFn.scrollToDest(cloudchewieFn.getEleTop(cloudchewieFn.getParents(e.target,".tabs")),300)}))}))},toggleCardCategory:()=>{const e=document.querySelectorAll("#aside-cat-list .card-category-list-item.parent i");e.length&&e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.classList.toggle("expand");const n=t.parentNode.nextElementSibling;cloudchewieFn.isHidden(n)?n.style.display="block":n.style.display="none"}))}))},addPostOutdateNotice:()=>{const e=GLOBAL_CONFIG.noticeOutdate,t=cloudchewieFn.diffDate(GLOBAL_CONFIG_SITE.postUpdate);if(t>=e.limitDay){const n=document.createElement("div");n.className="post-outdate-notice",n.textContent=e.messagePrev+" "+t+" "+e.messageNext;const o=document.getElementById("article-container");"top"===e.position?o.insertBefore(n,o.firstChild):o.appendChild(n)}},lazyloadImg:()=>{window.lazyLoadInstance=new LazyLoad({elements_selector:"img",threshold:0,data_src:"lazy-src"})},relativeDate:e=>{e.forEach((e=>{const t=e,n=t.getAttribute("datetime");t.innerText=cloudchewieFn.diffDate(n,!0),t.style.display="inline"}))},randomPost:()=>{let e=saveToLocal.get("postLinks");if(e)for(;;){let t=e[Math.floor(Math.random()*e.length)];if("/"!=t&&"/404.html"!=t&&-1!=t.indexOf("/posts/")&&t!=window.location.pathname)return void pjax.loadUrl(t)}fetch("/sitemap.xml").then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>{let t=e.querySelectorAll("url loc"),n=[];t.forEach((e=>{let t=e.innerHTML.split("/"),o="/";for(var a=3;a<t.length;a++)a==t.length-1?o+=t[a]:o+=t[a]+"/";n.push(o)})),saveToLocal.set("postLinks",n,.02),cloudchewieFn.randomPost()}))},sweetSnack:()=>{"NaN"==cloudchewieFn.getCookie("daynight")?cloudchewieFn.day_night_count=0:cloudchewieFn.day_night_count=new Number(cloudchewieFn.getCookie("daynight")),setInterval((()=>{cloudchewieFn.day_night_count+-3==0&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("冬至·伊始:我的心与爱是不是能够这般纯粹，经受住时空的考验"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==20&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("交替·新生:月徊而霜凝兮，良人伴我侧；月斜而影绰兮，明镜照我心"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==60&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("风起·渴盼:桐絮扰动着尘世，恋人缔造着世界；细腻不语的青苔，是我对你的爱恋"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==120&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("雾霭·探索:越来越浓的雾霭模糊着彼此的视线，越来越厚的障壁阻隔着彼此的心儿"),cloudchewieFn.day_night_count++),cloudchewieFn.day_night_count+-3==200&&(void 0!==GLOBAL_CONFIG.Snackbar&&cloudchewieFn.snackbarShowLong("拨云·成长:生活不全都是恋爱，恋爱却全都是生活"),cloudchewieFn.day_night_count++),cloudchewieFn.setCookie("daynight",cloudchewieFn.day_night_count.toString())}),500)},switchPostChart:()=>{let e="light"===document.documentElement.getAttribute("data-theme")?"#4C4948":"rgba(255,255,255,0.7)";if(document.getElementById("posts-chart")&&postsOption)try{let t=postsOption;t.title.textStyle.color=e,t.xAxis.nameTextStyle.color=e,t.yAxis.nameTextStyle.color=e,t.xAxis.axisLabel.color=e,t.yAxis.axisLabel.color=e,t.xAxis.axisLine.lineStyle.color=e,t.yAxis.axisLine.lineStyle.color=e,t.series[0].markLine.data[0].label.color=e,postsChart.setOption(t)}catch(e){}if(document.getElementById("tags-chart")&&tagsOption)try{let t=tagsOption;t.title.textStyle.color=e,t.xAxis.nameTextStyle.color=e,t.yAxis.nameTextStyle.color=e,t.xAxis.axisLabel.color=e,t.yAxis.axisLabel.color=e,t.xAxis.axisLine.lineStyle.color=e,t.yAxis.axisLine.lineStyle.color=e,t.series[0].markLine.data[0].label.color=e,tagsChart.setOption(t)}catch(e){}if(document.getElementById("categories-chart")&&categoriesOption)try{let t=categoriesOption;t.title.textStyle.color=e,t.legend.textStyle.color=e,categoryParentFlag||(t.series[0].label.color=e),categoriesChart.setOption(t)}catch(e){}},switchCommentBarrage:function(){let e=document.querySelector(".comment-barrage");e&&("flex"===window.getComputedStyle(e).display?(e.style.display="none",cloudchewieFn.snackbarShow("已关闭评论弹幕"),document.querySelector(".menu-commentBarrage-text").textContent="显示弹幕",document.getElementById("con-barrage")&&document.getElementById("con-barrage").classList.remove("checked"),document.getElementById("switch_commentBarrage")&&document.getElementById("switch_commentBarrage").classList.remove("checked"),cloudchewieFn.saveData("enableCommentBarrage","false")):(e.style.display="flex",document.querySelector(".menu-commentBarrage-text").textContent="关闭弹幕",document.getElementById("con-barrage")&&document.getElementById("con-barrage").classList.add("checked"),document.getElementById("switch_commentBarrage")&&document.getElementById("switch_commentBarrage").classList.add("checked"),cloudchewieFn.snackbarShow("已开启评论弹幕"),cloudchewieFn.saveData("enableCommentBarrage","true"))),cloudchewieFn.toggleRightMenu(!1)},switchRightClickMenuHotReview:function(){const e=document.getElementById("post-comment"),t=document.getElementById("menu-commentBarrage");t.style.display=e?"flex":"none"},loadDownloadList:()=>{const e=$("#download-list-data"),t=$("#download div.download-list:last-child");if(!e||!t)return;let n=JSON.parse(e.html()),o="";n.forEach((e=>{o+=`<a class="download-list-item-button" target="_blank" rel="noopener" href="${e.href}" title="${e.title}"><span>${e.title}</span></a>`})),t.html(o)},loadDamaku:()=>{const e=new EasyDanmaku({el:"#danmu",line:10,speed:20,hover:!0,loop:!0});let t=saveToLocal.get("danmu");if(t)e.batchSend(t,!0);else{let o=[];function n(e){return(e=(e=(e=(e=e.replace(/<\/*br>|[\s\uFEFF\xA0]+/g,"")).replace(/<img.*?>/g,"[图片]")).replace(/<a.*?>.*?<\/a>/g,"[链接]")).replace(/<pre.*?>.*?<\/pre>/g,"[代码块]")).replace(/<.*?>/g,"")}fetch("https://comment.cloudchewie.com/",{method:"POST",body:JSON.stringify({event:"GET_RECENT_COMMENTS",accessToken:"df242fe099bf81ec336572476fbdc208",includeReply:!1,pageSize:100}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((({data:t})=>{t.forEach((e=>{null==e.avatar&&(e.avatar="https://cravatar.cn/avatar/d615d5793929e8c7d70eab5f00f7f5f1?d=mp"),o.push({avatar:e.avatar,content:e.nick+"："+n(e.comment)})})),e.batchSend(o,!0),saveToLocal.set("danmu",o,.02)})).catch((()=>cloudchewieFn.snackbarShow("评论系统过载,请稍后访问")))}document.getElementById("danmuBtn").innerHTML="<button class=\"hideBtn\" onclick=\"document.getElementById('danmu').classList.remove('hidedanmu')\">显示弹幕</button> <button class=\"hideBtn\" onclick=\"document.getElementById('danmu').classList.add('hidedanmu')\">隐藏弹幕</button>"},toggleMusic:function(e=!0){if(cloudchewieFn.isMusic()){let t='<i class="fas fa-play"></i><span>播放音乐</span>',n='<i class="fas fa-pause"></i><span>暂停音乐</span>';cloudchewie_musicPlaying?(document.getElementById("menuMusic").innerHTML=t,document.querySelector("#con-music i").classList="fas fa-play",cloudchewie_musicPlaying=!1):(document.getElementById("menuMusic").innerHTML=n,document.querySelector("#con-music").classList.add("on"),document.querySelector("#con-music i").classList="fas fa-pause",cloudchewie_musicPlaying=!0),e&&anMusicEl.querySelector("meting-js").aplayer.toggle()}else{cloudchewie_musicFirst||(cloudchewieFn.musicBindEvent(),cloudchewie_musicFirst=!0);let t='<i class="fas fa-play"></i><span>播放音乐</span>',n='<i class="fas fa-pause"></i><span>暂停音乐</span>';cloudchewie_musicPlaying?(navMusicEl.classList.remove("playing"),document.getElementById("menuMusic").innerHTML=t,document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#con-music i").classList="fas fa-play",cloudchewie_musicPlaying=!1,navMusicEl.classList.remove("stretch")):(navMusicEl.classList.add("playing"),document.getElementById("menuMusic").innerHTML=n,document.querySelector("#con-music").classList.add("on"),document.querySelector("#con-music i").classList="fas fa-pause",cloudchewie_musicPlaying=!0,navMusicEl.classList.add("stretch")),e&&document.querySelector("#nav-music meting-js").aplayer.toggle()}},musicTelescopic:function(){navMusicEl.classList.contains("stretch")?navMusicEl.classList.remove("stretch"):navMusicEl.classList.add("stretch")},musicSkipBack:function(){navMusicEl.querySelector("meting-js").aplayer.skipBack(),cloudchewieFn.toggleRightMenu(!1)},musicSkipForward:function(){navMusicEl.querySelector("meting-js").aplayer.skipForward(),cloudchewieFn.toggleRightMenu(!1)},musicGetName:function(){for(var e=document.querySelector(".aplayer-title"),t=[],n=e.length-1;n>=0;n--)t[n]=e[n].innerText;return t[0]},musicBindEvent:function(){document.querySelector("#nav-music .aplayer-music").addEventListener("click",(function(){cloudchewieFn.musicTelescopic()})),document.querySelector("#nav-music .aplayer-button").addEventListener("click",(function(){cloudchewieFn.toggleMusic(!1)}))},listenNavMusicPause:function(){const e=setInterval((()=>{if(navMusicEl.querySelector("#nav-music meting-js").aplayer){clearInterval(e);let t='<i class="fas fa-play"></i><span>播放音乐</span>',n='<i class="fas fa-pause"></i><span>暂停音乐</span>';navMusicEl.querySelector("#nav-music meting-js").aplayer.on("pause",(function(){navMusicEl.classList.remove("playing"),document.getElementById("menuMusic").innerHTML=t,document.getElementById("nav-music-hoverTips").innerHTML="音乐已暂停",document.querySelector("#con-music i").classList="fas fa-play",cloudchewie_musicPlaying=!1,navMusicEl.classList.remove("stretch")})),navMusicEl.querySelector("#nav-music meting-js").aplayer.on("play",(function(){navMusicEl.classList.add("playing"),document.getElementById("menuMusic").innerHTML=n,document.querySelector("#con-music i").classList="fas fa-pause",cloudchewie_musicPlaying=!0}))}}),16)},playMusic(){if(cloudchewieFn.isMusic()){document.getElementById("anMusic-page").querySelector("meting-js").aplayer.play()}else{document.getElementById("nav-music").querySelector("meting-js").aplayer.play()}},changeMusicBg:function(e=!0){const t=document.getElementById("an_music_bg");if(e){const e=document.querySelector("#anMusic-page .aplayer-pic");t.style.backgroundImage=e.style.backgroundImage,$web_container.style.background="none"}else{let e=setInterval((()=>{document.querySelector("#anMusic-page .aplayer-pic")&&(clearInterval(e),cloudchewieFn.addEventListenerMusic(),cloudchewieFn.changeMusicBg(),document.querySelector("#nav-music meting-js").aplayer&&!document.querySelector("#nav-music meting-js").aplayer.audio.paused&&cloudchewieFn.toggleMusic())}),100)}null!=document.querySelector("#anMusic-page .aplayer-title")&&null!=document.querySelector("#anMusic-page .aplayer-title").innerHTML&&""!=document.querySelector("#anMusic-page .aplayer-title").innerHTML&&(document.title=document.querySelector("#anMusic-page .aplayer-title").innerHTML+" - 天籁 | Cloudchewie")},initAnPlayer:function(){if(!cloudchewieFn.isMusic())return;const e=new URLSearchParams(window.location.search);var t="7185982924",n="netease";if(null!=cloudchewieFn.loadData("playlist")){var o=JSON.parse(cloudchewieFn.loadData("playlist"));t=o.id,n=o.server}const a=document.getElementById("anMusic-page-meting");if(e.get("id")&&e.get("server")){const t=e.get("id"),n=e.get("server");a.innerHTML=`<meting-js id="${t}" server=${n} type="playlist" type="playlist" mutex="true" preload="auto" theme="var(--theme-color)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>`}else a.innerHTML=`<meting-js id="${t}" server="${n}" type="playlist" mutex="true" preload="auto" theme="var(--theme-color)" order="list" list-max-height="calc(100vh - 169px)!important"></meting-js>`;cloudchewieFn.changeMusicBg(!1)},addEventListenerMusic:function(){const e=document.getElementById("anMusic-page"),t=e.querySelector(".aplayer-info .aplayer-time .aplayer-icon-menu"),n=e.querySelector("meting-js").aplayer;n.volume(.8,!0),n.on("loadeddata",(function(){cloudchewieFn.changeMusicBg()})),t.addEventListener("click",(function(){document.getElementById("menu-mask").style.display="block",document.getElementById("menu-mask").style.animation="0.5s ease 0s 1 normal none running to_show",e.querySelector(".aplayer.aplayer-withlist .aplayer-list").style.opacity="1"})),document.getElementById("menu-mask").addEventListener("click",(function t(){cloudchewieFn.isMusic()?null!=e.querySelector(".aplayer-list")&&e.querySelector(".aplayer-list").classList.remove("aplayer-list-hide"):document.getElementById("menu-mask").removeEventListener("click",t)})),document.addEventListener("keydown",(function(e){"Space"===e.code&&(e.preventDefault(),n.toggle()),39===e.keyCode&&(e.preventDefault(),n.skipForward()),37===e.keyCode&&(e.preventDefault(),n.skipBack()),38===e.keyCode&&musicVolume<=1&&(musicVolume+=.1,n.volume(musicVolume,!0)),40===e.keyCode&&musicVolume>=0&&(musicVolume+=-.1,n.volume(musicVolume,!0))}))},changeMusicList:async function(e,t,n="playlist"){if(cloudchewieFn.isMusic()){const o=document.getElementById("anMusic-page");if(null==o||null==o.querySelector("meting-js"))return;const a=o.querySelector("meting-js").aplayer;o.querySelector("meting-js")._fetchSongs(e,t,n).then((e=>{if(null!=a){let t=a.audio.paused;a.list.clear(),a.list.add(e),t||cloudchewieFn.playMusic()}}))}else{const o=document.getElementById("nav-music");if(null==o||null==o.querySelector("meting-js"))return;const a=o.querySelector("meting-js").aplayer;o.querySelector("meting-js")._fetchSongs(e,t,n).then((e=>{if(null!=a){let t=a.audio.paused;a.list.clear(),a.list.add(e),t||cloudchewieFn.playMusic()}}))}},bindRightSideBtn:()=>{document.getElementById("rightside").addEventListener("click",(e=>{const t=e.target.id?e.target:e.target.parentNode;switch(t.id){case"go-up":cloudchewieFn.scrollToTop();break;case"go-down":cloudchewieFn.scrollToBottom();break;case"rightside_config":cloudchewieFn.toggleSideBtn(t);break;case"mobile-toc-button":cloudchewieFn.toggleMobileToc();break;case"readmode":cloudchewieFn.toggleReadMode();break;case"darkmode":cloudchewieFn.toggleDarkMode();break;case"hide-aside-btn":cloudchewieFn.toggleAside()}}))},parseImage:e=>`<a href="${e}" data-fancybox="gallery" class="fancybox" data-thumb="${e}"><img class="no-lazyload" src="${e}"></a>`,jumpToComment:e=>{var t=document.querySelector(".el-textarea__inner");t.value=`> ${e}\n\n`,t.focus(),cloudchewieFn.snackbarShow("无需删除空行，直接输入评论即可",!1,2e3)},fetchMemos:async()=>{var e=[],t={};fetch("/memos_user.json").then((e=>e.json())).then((async n=>{await Promise.allSettled(n.map((e=>((e,t)=>{const n=new Promise(((t,n)=>setTimeout((()=>n("Timed out after ms.")),e)));return Promise.race([t,n])})(2e3,fetch("https://memos.cloudchewie.com/api/v1/memo?creatorId="+e.id+"&rowStatus=NORMAL&limit=10").then((e=>e.json())).then((e=>e)))))).then((o=>{for(var a=0;a<o.length;a++){if("fulfilled"==o[a].status)for(var c=o[a].value,l=0;l<c.length;l++){var i=c[l];if(Math.floor(((new Date).getTime()-1e3*i.updatedTs)/864e5)<365){let o="";n.forEach((e=>{e.id==i.creatorId&&(o=e.avatar)})),t={id:i.id,avatar:o&&""!=o?o:"https://picbed.cloudchewie.com/img/badge/memos.webp",updatedTs:i.updatedTs,creatorId:i.creatorId,creator:i.creatorName,content:i.content,resourceList:i.resourceList},e.push(t)}}}var s;e.sort((s="updatedTs",function(e,t){var n=e[s];return t[s]-n})),cloudchewieFn.loadMemos(e)}))}))},loadMemos:e=>{let t=[],n="";e.forEach((e=>{t.push(cloudchewieFn.formatMemo(e))})),t.forEach((e=>{n+=`\n                <div class="talk_item">\n                  <div class="talk_content">${e.content}</div>\n                  <div class="talk_spacer"></div>\n                  <div class="talk_meta">\n                    <img class="no-lightbox no-lazyload avatar" src="${e.avatar}">\n                    <div class="info">\n                      <span class="talk_nick">${e.name}</span>\n                      <span class="talk_dot">·</span>\n                      <span class="talk_date">${e.date}</span>\n                    </div>\n                  </div>\n                </div>\n                `})),document.getElementById("talk").innerHTML=n,window.Lately&&Lately.init({target:".talk_date"});var o=0,a=setInterval((function(){cloudchewieFn.isNowtime()&&(waterfall("#talk"),setTimeout((()=>{waterfall("#talk")}),300)),++o>5&&clearInterval(a)}),300)},formatMemo:e=>{BILIBILI_REG=/<a.*?href="https:\/\/www\.bilibili\.com\/video\/((av[\d]{1,10})|(BV([\w]{10})))\/?".*?>.*<\/a>/g,NETEASE_MUSIC_REG=/<a.*?href="https:\/\/music\.163\.com\/.*id=([0-9]+)".*?>.*<\/a>/g,QQMUSIC_REG=/<a.*?href="https\:\/\/y\.qq\.com\/n\/ryqq\/songDetail.*\/([0-9a-zA-Z]+)?".*?>.*?<\/a>/g,QQVIDEO_REG=/<a.*?href="https:\/\/v\.qq\.com\/.*\/([a-z|A-Z|0-9]+)\.html".*?>.*<\/a>/g,YOUKU_REG=/<a.*?href="https:\/\/v\.youku\.com\/.*\/id_([a-z|A-Z|0-9|==]+)\.html".*?>.*<\/a>/g,YOUTUBE_REG=/<a.*?href="https:\/\/www\.youtube\.com\/watch\?v\=([a-z|A-Z|0-9]{11})\".*?>.*<\/a>/g,marked.setOptions({breaks:!0,smartypants:!1,langPrefix:"language-",mangle:!1,headerIds:!1});const t=new marked.Renderer,n=t.link;t.link=(e,o,a)=>{const c=e.startsWith(`${location.protocol}//${location.hostname}`),l=n.call(t,e,o,a);return c?l:l.replace(/^<a /,'<a target="_blank" rel="noreferrer noopener nofollow" ')},marked.use({renderer:t});let o=e.content,a=[];return o=o.replace(/#([^\s#]+)/,"<span class='tag-span'>#$1</span> ").replace(/\!\[(.*?)\]\((.*?)\)/g,'<a href="$2" data-fancybox="gallery" class="fancybox" data-thumb="$2"><img class="no-lazyload" src="$2"></a>'),o=marked.parse(o).replace(BILIBILI_REG,"<div class='video-wrapper'><iframe src='//www.bilibili.com/blackboard/html5mobileplayer.html?bvid=$1&as_wide=1&high_quality=1&danmaku=1' scrolling='no' border='0' frameborder='no' framespacing='0' allowfullscreen='true'></iframe></div>").replace(NETEASE_MUSIC_REG,"<meting-js class='music-wrapper' auto='https://music.163.com/#/song?id=$1'></meting-js>").replace(QQMUSIC_REG,"<meting-js class='music-wrapper' auto='https://y.qq.com/n/yqq/song/$1.html'></meting-js>").replace(QQVIDEO_REG,"<div class='video-wrapper'><iframe src='//v.qq.com/iframe/player.html?vid=$1' allowFullScreen='true' frameborder='no'></iframe></div>").replace(YOUKU_REG,"<div class='video-wrapper'><iframe src='https://player.youku.com/embed/$1' frameborder=0 'allowfullscreen'></iframe></div>").replace(YOUTUBE_REG,"<div class='video-wrapper'><iframe src='https://www.youtube.com/embed/$1' title='YouTube video player' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture' allowfullscreen title='YouTube Video'></iframe></div>"),null!=e.resourceList&&e.resourceList.forEach((e=>{null!=e.externalLink&&null!=e.externalLink&&""!=e.externalLink?a.push(e.externalLink):a.push(`https://memos.cloudchewie.com/o/r/${e.id}/${e.publicId}/${e.filename}`)})),a.length>0&&(o+='<div class="zone_imgbox">',a.map((e=>e.replace(/!\[.*\]\((.*?)\)/,"$1"))).forEach((e=>o+=`<a href="${e}" data-fancybox="gallery" class="fancybox" data-thumb="${e}"><img class="no-lazyload" src="${e}"></a>`)),o+="</div>"),{content:o,date:new Date(1e3*e.updatedTs).toLocaleString(),text:"".replace(/\[(.*?)\]\((.*?)\)/g,"[链接]"+(a?"[图片]":"")),name:e.creator,avatar:e.avatar}},insertAIDiv:e=>{cloudchewieFn.removeExistingAIDiv();const t=document.querySelector(e);if(!t)return;const n=document.createElement("div");n.className="post-cloudGPT";const o=document.createElement("div");o.className="cloudGPT-title",n.appendChild(o);const a=document.createElement("i");a.className="cloudGPT-title-icon",o.appendChild(a),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 48 48">\n      <title>机器人</title>\n      <g id="&#x673A;&#x5668;&#x4EBA;" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M34.717885,5.03561087 C36.12744,5.27055371 37.079755,6.60373651 36.84481,8.0132786 L35.7944,14.3153359 L38.375,14.3153359 C43.138415,14.3153359 47,18.1768855 47,22.9402569 L47,34.4401516 C47,39.203523 43.138415,43.0650727 38.375,43.0650727 L9.625,43.0650727 C4.861585,43.0650727 1,39.203523 1,34.4401516 L1,22.9402569 C1,18.1768855 4.861585,14.3153359 9.625,14.3153359 L12.2056,14.3153359 L11.15519,8.0132786 C10.920245,6.60373651 11.87256,5.27055371 13.282115,5.03561087 C14.69167,4.80066802 16.024865,5.7529743 16.25981,7.16251639 L17.40981,14.0624532 C17.423955,14.1470924 17.43373,14.2315017 17.43948,14.3153359 L30.56052,14.3153359 C30.56627,14.2313867 30.576045,14.1470924 30.59019,14.0624532 L31.74019,7.16251639 C31.975135,5.7529743 33.30833,4.80066802 34.717885,5.03561087 Z M38.375,19.4902885 L9.625,19.4902885 C7.719565,19.4902885 6.175,21.0348394 6.175,22.9402569 L6.175,34.4401516 C6.175,36.3455692 7.719565,37.89012 9.625,37.89012 L38.375,37.89012 C40.280435,37.89012 41.825,36.3455692 41.825,34.4401516 L41.825,22.9402569 C41.825,21.0348394 40.280435,19.4902885 38.375,19.4902885 Z M14.8575,23.802749 C16.28649,23.802749 17.445,24.9612484 17.445,26.3902253 L17.445,28.6902043 C17.445,30.1191812 16.28649,31.2776806 14.8575,31.2776806 C13.42851,31.2776806 12.27,30.1191812 12.27,28.6902043 L12.27,26.3902253 C12.27,24.9612484 13.42851,23.802749 14.8575,23.802749 Z M33.1425,23.802749 C34.57149,23.802749 35.73,24.9612484 35.73,26.3902253 L35.73,28.6902043 C35.73,30.1191812 34.57149,31.2776806 33.1425,31.2776806 C31.71351,31.2776806 30.555,30.1191812 30.555,28.6902043 L30.555,26.3902253 C30.555,24.9612484 31.71351,23.802749 33.1425,23.802749 Z" id="&#x5F62;&#x72B6;&#x7ED3;&#x5408;" fill="#444444" fill-rule="nonzero"></path>\n      </g>\n      </svg>';const c=document.createElement("div");c.className="cloudGPT-title-text",c.textContent="AI摘要",o.appendChild(c);const l=document.createElement("div");l.className="cloudGPT-tag",l.id="cloudGPT-tag",l.textContent="CloudGPT",o.appendChild(l);const i=document.createElement("div");i.className="cloudGPT-explanation",i.innerHTML='生成中...<span class="blinking-cursor"></span>',n.appendChild(i),t.insertBefore(n,t.firstChild)},removeExistingAIDiv:()=>{const e=document.querySelector(".post-cloudGPT");e&&e.parentElement.removeChild(e)},getTitleAndContent:function(){try{const e=document.title,t=document.querySelector(cloudGPT_postSelector);if(!t)return"";const n=t.getElementsByTagName("p"),o=t.querySelectorAll("h1, h2, h3, h4, h5");let a="";for(let e of o)a+=e.innerText+" ";for(let e of n){a+=e.innerText.replace(/https?:\/\/[^\s]+/g,"")}let c=1e3;"undefined"!=typeof cloudGPT_wordLimit&&(c=cloudGPT_wordLimit);return(e+" "+a).slice(0,c)}catch(e){return""}},fetchcloudGPT:async function(e){if(!cloudGPT_key)return"没有获取到key，代码可能没有安装正确。如果你需要在cloudchewieCPT文件引用前定义cloudGPT_key变量。详细请查看文档。";if("5Q5mpqRK5DkwT1X9Gi5e"===cloudGPT_key)return"请购买 key 使用，如果你能看到此条内容，则说明代码安装正确。";const t=`https://summary.tianli0.top/?content=${encodeURIComponent(e)}&key=${encodeURIComponent(cloudGPT_key)}`;try{const e=new AbortController,n=(setTimeout((()=>e.abort()),2e4),await fetch(t,{signal:e.signal}));if(n.ok){return(await n.json()).summary}throw 402===n.status&&document.querySelectorAll(".post-cloudGPT").forEach((e=>{e.style.display="none"})),new Error("CloudGPT：余额不足，请充值后请求新的文章")}catch(e){return"AbortError"===e.name?"localhost"===window.location.hostname?"获取文章摘要超时。请勿在本地主机上测试 API 密钥。":"获取文章摘要超时。当你出现这个问题时，可能是key或者绑定的域名不正确。也可能是因为文章过长导致的 AI 运算量过大，您可以稍等一下然后刷新页面重试。":"获取文章摘要失败，请稍后再试。"}},aiShowAnimation:function(e){const t=document.querySelector(".cloudGPT-explanation");if(!t)return;if(cloudGPTIsRunning)return;cloudGPTIsRunning=!0;const n=25,o=6;t.style.display="block",t.innerHTML='生成中...<span class="blinking-cursor"></span>';let a=!1,c=0,l=!0;function i(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}let s=performance.now();function r(){if(c<e.length&&a){const a=performance.now(),l=a-s,i=e.slice(c,c+1);l>=(/[，。！、？,.!?]/.test(i)?n*o:n)&&(t.innerText=e.slice(0,c+1),s=a,c++,c<e.length?t.innerHTML=e.slice(0,c)+'<span class="blinking-cursor"></span>':(t.innerHTML=e,t.style.display="block",cloudGPTIsRunning=!1)),requestAnimationFrame(r)}}function d(){i(t)?a||(a=!0,l?setTimeout((()=>{r(),l=!1}),1e3):r()):a=!1}function d(){i(t)?a||(a=!0,l?setTimeout((()=>{r(),l=!1}),1e3):r()):a=!1}window.addEventListener("scroll",d),window.addEventListener("resize",d),window.addEventListener("scroll",d),window.addEventListener("resize",d);const u=setInterval(d,500);cloudGPTIsRunning||clearInterval(u),d()},runcloudGPT:()=>{if(!enableGPT)return;cloudchewieFn.insertAIDiv(cloudGPT_postSelector);const e=cloudchewieFn.getTitleAndContent();cloudchewieFn.fetchcloudGPT(e).then((e=>{cloudchewieFn.aiShowAnimation(e)}))},checkURLAndRunGPT:()=>{if("undefined"!=typeof cloudGPT_postURL)try{const e=e=>new RegExp("^"+e.split(/\*+/).map(t).join(".*")+"$"),t=e=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),n=e(cloudGPT_postURL),o=window.location.href;n.test(o)&&cloudchewieFn.runcloudGPT()}catch(e){}else cloudchewieFn.runcloudGPT()}},addHighlight=function(){const e=GLOBAL_CONFIG.highlight;if(!e)return;const t=e.highlightCopy,n=e.highlightLang,o=GLOBAL_CONFIG_SITE.isHighlightShrink,a=e.highlightHeightLimit,c=t||n||void 0!==o,l="highlighjs"===e.plugin?document.querySelectorAll("figure.highlight"):document.querySelectorAll('pre[class*="language-"]');if(!c&&!a||!l.length)return;const i="prismjs"===e.plugin;let s="",r="";const d=!0===o?"closed":"";void 0!==o&&(s=`<i class="fas fa-angle-down expand ${d}"></i>`),t&&(r='<div class="copy-notice"></div><i class="fas fa-paste copy-button"></i>');const u=e=>{const t=e.parentNode;t.classList.add("copy-true");const n=window.getSelection(),o=document.createRange();i?o.selectNodeContents(t.querySelectorAll("pre code")[0]):o.selectNodeContents(t.querySelectorAll("table .code pre")[0]),n.removeAllRanges(),n.addRange(o);n.toString();((e,t)=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy"))if(document.execCommand("copy"),void 0!==GLOBAL_CONFIG.Snackbar)cloudchewieFn.snackbarShow(GLOBAL_CONFIG.copy.success);else{const e=t.previousElementSibling;e.innerText=GLOBAL_CONFIG.copy.success,e.style.opacity=1,setTimeout((()=>{e.style.opacity=0}),700)}else void 0!==GLOBAL_CONFIG.Snackbar?cloudchewieFn.snackbarShow(GLOBAL_CONFIG.copy.noSupport):t.previousElementSibling.innerText=GLOBAL_CONFIG.copy.noSupport})(0,e.lastChild),n.removeAllRanges(),t.classList.remove("copy-true")},m=function(e){const t=e.target.classList;t.contains("expand")?(e=>{const t=[...e.parentNode.children].slice(1);e.firstChild.classList.toggle("closed"),cloudchewieFn.isHidden(t[t.length-1])?t.forEach((e=>{e.style.display="block"})):t.forEach((e=>{e.style.display="none"}))})(this):t.contains("copy-button")&&u(this)},h=function(){this.classList.toggle("expand-done")};function g(e,t,n){const o=document.createDocumentFragment();if(c){const t=document.createElement("div");t.className=`highlight-tools ${d}`,t.innerHTML=s+e+r,t.addEventListener("click",m),o.appendChild(t)}if(a&&t.offsetHeight>a+30){const e=document.createElement("div");e.className="code-expand-btn",e.innerHTML='<i class="fas fa-angle-double-down"></i>',e.addEventListener("click",h),o.appendChild(e)}"hl"===n?t.insertBefore(o,t.firstChild):t.parentNode.insertBefore(o,t)}n?i?l.forEach((function(e){const t=`<div class="code-lang">${e.getAttribute("data-language")?e.getAttribute("data-language"):"Code"}</div>`;cloudchewieFn.wrap(e,"figure",{class:"highlight"}),g(t,e)})):l.forEach((function(e){let t=e.getAttribute("class").split(" ")[1];"plain"!==t&&void 0!==t||(t="Code");g(`<div class="code-lang">${t}</div>`,e,"hl")})):i?l.forEach((function(e){cloudchewieFn.wrap(e,"figure",{class:"highlight"}),g("",e)})):l.forEach((function(e){g("",e,"hl")}))},mobileSidebarFn={dragStartX:0,mobileSidebarOpen:!1,onDragStart:e=>{mobileSidebarFn.dragStartX=mobileSidebarFn.getEventX(e),$web_box.style.transition="all .3s",mobileSidebarFn.addMoveEndListeners(mobileSidebarFn.onDragMove,mobileSidebarFn.onDragEnd)},onDragMove:e=>{const t=mobileSidebarFn.getEventX(e)-mobileSidebarFn.dragStartX;if(t<0){const e=window.innerWidth,n=Math.min(-300,-1*t/e*300),o=Math.min(1,.86+t/e*.14);$web_box.style.transform=`translate3d(-${n}px, 0px, 0px) scale3d(${o}, ${o}, 1)`}},onDragMove:e=>{const t=mobileSidebarFn.getEventX(e)-mobileSidebarFn.dragStartX;if(t<0){const e=window.innerWidth,n=Math.min(-300,-1*t/e*300),o=Math.min(1,.86+t/e*.14);$web_box.style.transform=`translate3d(-${n}px, 0px, 0px) scale3d(${o}, ${o}, 1)`}},onDragEnd:e=>{const t=window.innerWidth;mobileSidebarFn.getEventX(e)<=t/1.5?mobileSidebarFn.completeTransition():mobileSidebarFn.resetTransition(),mobileSidebarFn.removeMoveEndListeners(mobileSidebarFn.onDragMove,mobileSidebarFn.onDragEnd)},completeTransition:()=>{$web_box.style.transition="all 0.3s ease-out",$web_box.style.transform="none",mobileSidebarFn.close(),mobileSidebarFn.removeMoveEndListeners(mobileSidebarFn.onDragMove,mobileSidebarFn.onDragEnd)},resetTransition:()=>{$web_box.style.transition="",$web_box.style.transform=""},getEventX:e=>e.type.startsWith("touch")?e.changedTouches[0].clientX:e.clientX,addMoveEndListeners:(e,t)=>{document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t)},removeMoveEndListeners:(e,t)=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t)},open:()=>{cloudchewieFn.sidebarPaddingR(),$sidebarMenus.classList.add("open"),$rightside.classList.add("hide"),document.body.style.overflow="hidden",cloudchewieFn.animateIn(document.getElementById("menu-mask"),"to_show 0.5s"),document.getElementById("sidebar-menus").classList.add("open"),mobileSidebarFn.mobileSidebarOpen=!0,$web_box.classList.add("open"),$web_box.addEventListener("mousedown",mobileSidebarFn.onDragStart),$web_box.addEventListener("touchstart",mobileSidebarFn.onDragStart,{passive:!1}),cloudchewieFn.isMusic()?$web_container.style.background="rgb(255 255 255 / 20%)":$web_container.style.background="var(--global-bg)"},close:()=>{$sidebarMenus.classList.remove("open");const e=document.body;e.style.overflow="",$rightside.classList.remove("hide"),e.style.paddingRight="",cloudchewieFn.animateOut(document.getElementById("menu-mask"),"to_hide 0.5s"),document.getElementById("sidebar-menus").classList.remove("open"),mobileSidebarFn.mobileSidebarOpen=!1,$web_box.classList.remove("open"),$web_container.style.background="none",document.getElementById("nav-totop").classList.remove("long")}},consoleFn={toggleConsole:()=>{$("#settingWindow").fadeToggle("fast"),$("#console-mask").fadeToggle("fast"),"none"!=$("#settingWindow").css("display")&&$("#settingWindow").css("display","flex")},showConsole:()=>{$("#settingWindow").fadeIn("fast"),$("#console-mask").fadeIn("fast"),"none"!=$("#settingWindow").css("display")&&$("#settingWindow").css("display","flex")},closeConsole:()=>{$("#settingWindow").fadeOut("fast"),$("#console-mask").fadeOut("fast"),"none"!=$("#settingWindow").css("display")&&$("#settingWindow").css("display","flex")},loadSetting:()=>{$("#backer").hide(),$(".asetting").hide(),$("#settingWindow").hide(),document.getElementById("settingStyle").innerText="\n  *,*:not(.card-info)::before,*::after{\n      -webkit-backdrop-filter: none!important;\n      backdrop-filter: none!important;\n      -webkit-filter: none!important;\n      filter: none!important;\n  }",null==cloudchewieFn.loadData("enableAutoColor")&&cloudchewieFn.saveData("enableAutoColor","false"),"true"==cloudchewieFn.loadData("enableAutoColor")&&(document.getElementById("con-toggleAutoColor").checked=!0,GLOBAL_CONFIG_SITE.isPost&&consoleFn.changeAutoColor(!0)),GLOBAL_CONFIG_SITE.isPost||consoleFn.setDefaultThemeColor(3),null==cloudchewieFn.loadData("enableFixedNav")&&cloudchewieFn.saveData("enableFixedNav","false"),"false"==cloudchewieFn.loadData("enableFixedNav")?($("#page-header").removeClass("nav-fixed nav-visible"),$("#name-container").hide()):($("#name-container").show(),$("#page-header").addClass("nav-fixed nav-visible"),document.getElementById("con-toggleFixedNav").checked=!0),null==cloudchewieFn.loadData("enableContextMenu")&&cloudchewieFn.saveData("enableContextMenu","true"),"true"==cloudchewieFn.loadData("enableContextMenu")?($("#con-rightmouse").addClass("checked"),cloudchewieFn.bindContextMenu(!0,!1)):($("#con-rightmouse").removeClass("checked"),cloudchewieFn.bindContextMenu(!1,!1)),null==cloudchewieFn.loadData("enableAPlayer")&&cloudchewieFn.saveData("enableAPlayer","false");const e=$("#nav-music");if(null!=e&&null!=e.find("meting-js")){const t=e.find("meting-js").aplayer;"true"==cloudchewieFn.loadData("enableAPlayer")?("/music/"!=location.pathname?e.show():e.hide(),$(".music-wrapper .aplayer").show(),document.getElementById("con-toggleAPlayer").checked=!0):(e.hide(),t&&t.pause())}null==cloudchewieFn.loadData("enableRightSide")&&cloudchewieFn.saveData("enableRightSide","true"),"false"==cloudchewieFn.loadData("enableRightSide")?$("#rightside").hide():($("#rightside").show(),document.getElementById("con-toggleRightSide").checked=!0),null==cloudchewieFn.loadData("enableCommentBarrage")&&cloudchewieFn.saveData("enableCommentBarrage","true"),"false"==cloudchewieFn.loadData("enableCommentBarrage")||(document.getElementById("con-barrage")&&document.getElementById("con-barrage").classList.add("checked"),document.getElementById("switch_commentBarrage")&&document.getElementById("switch_commentBarrage").classList.add("checked"));try{let e=cloudchewieFn.loadData("blogBackground",1440);e?consoleFn.changeBackground(e,1):cloudchewieFn.removeData("blogBackground")}catch(e){cloudchewieFn.removeData("blogBackground")}if("true"==cloudchewieFn.loadData("enableAutoTheme")){document.getElementById("con-toggleAutoTheme").checked=!0,$("#con-mode,.rightMenu-item:has(.fa-adjust)").hide();var t=new Date;t.getHours()<=7||t.getHours()>=19?(consoleFn.activateDarkMode(),cloudchewieFn.removeData("theme")):(consoleFn.activateLightMode(),cloudchewieFn.removeData("theme"))}if(null==cloudchewieFn.loadData("enableStarBackground")&&cloudchewieFn.saveData("enableStarBackground","true"),"true"==cloudchewieFn.loadData("enableStarBackground")?($("#universe").show(),document.getElementById("con-toggleStarBackground").checked=!0):($("#universe").hide(),document.getElementById("con-toggleStarBackground").checked=!1),null!=cloudchewieFn.loadData("playlist")){var n=JSON.parse(cloudchewieFn.loadData("playlist"));consoleFn.changeAPlayerList(n.id,n.server,!1)}document.getElementById("console-mask").addEventListener("click",consoleFn.closeConsole),document.getElementById("console-button").addEventListener("click",consoleFn.showConsole),window.onresize=()=>{cloudchewieFn.isFullScreen()||$("#con-fullscreen").removeClass("checked")},$(document).ready((function(){new MutationObserver((function(e){e.forEach((function(e){"data-theme"===e.attributeName&&("dark"==$("html").attr("data-theme")?consoleFn.setDefaultThemeColor(2):GLOBAL_CONFIG_SITE.isPost&&consoleFn.changeAutoColor(!1))}))})).observe($("html")[0],{attributes:!0})}))},resetSettings:()=>{cloudchewieFn.removeData("blogBackground"),cloudchewieFn.removeData("enableStarBackground"),cloudchewieFn.removeData("isLeftAside"),cloudchewieFn.removeData("enableRightSide"),cloudchewieFn.removeData("enableAutoTheme"),cloudchewieFn.removeData("enableFixedNav"),cloudchewieFn.removeData("enableAutoColor"),cloudchewieFn.removeData("enableContextMenu"),cloudchewieFn.removeData("enableAPlayer"),window.location.reload()},setDefaultBackground:()=>{cloudchewieFn.removeData("blogBackground"),window.location.reload()},changeBackground:(e,t)=>{let n=document.getElementById("web_bg"),o=document.querySelector(".parallax > use:nth-child(4)");"#"==e.charAt(0)?(n.style.background="none",n.style.backgroundColor=e,o&&(o.style.fill=e)):n.style.background=e,t||cloudchewieFn.saveData("blogBackground",e)},setDefaultThemeColor:e=>{let t=":root {  --global-font-size: 14px;  --theme-color: #3B70FC; --font-color: #4c4948;  --hr-border: #d2ebfd;  --hr-before-color: #bfe4fb;  --search-bg: #f6f8fa;  --search-input-color: #4c4948;  --search-result-title: #4c4948;  --preloader-bg: #37474f;  --preloader-color: #fff;  --tab-border-color: #f0f0f0;  --tab-botton-bg: #f0f0f0;  --tab-botton-color: #1f2d3d;  --tab-button-hover-bg: #dcdcdc;  --tab-button-active-bg: #fff;  --card-bg: #fff;  --sidebar-bg: #f6f8fa;  --btn-hover-color: #24b1ff;  --btn-color: #fff;  --btn-bg: #3B70FC;  --text-bg-hover: rgba(0,153,255,0.7);  --light-grey: #eee;  --dark-grey: #cacaca;  --white: #fff;  --text-highlight-color: #1f2d3d;  --blockquote-color: #6a737d;  --blockquote-bg: rgba(0,153,255,0.1);  --reward-pop: #f5f5f5;  --toc-link-color: #666261;  --card-border: 1px solid var(--tab-botton-bg);  --card-box-shadow: 0 0px 0px 0px rgba(45,45,45,0.05);  --card-box-shadow-olded: 0 8px 12px -3px rgba(45,45,45,0.05);  --card-hover-box-shadow: 0 8px 12px -3px rgba(45,45,45,0.05);  --card-border-dashed: 2px dashed var(--tab-button-hover-bg);  --pseudo-hover: #24b1ff;  --headline-presudo: #a0a0a0;}",n="[data-theme='dark'] {  --global-bg: #0d0d0d;  --font-color: rgba(255,255,255,0.7);  --hr-border: rgba(255,255,255,0.4);  --hr-before-color: rgba(255,255,255,0.7);  --search-bg: #121212;  --search-input-color: rgba(255,255,255,0.7);  --search-result-title: rgba(255,255,255,0.9);  --preloader-bg: #0d0d0d;  --preloader-color: rgba(255,255,255,0.7);  --tab-border-color: #2c2c2c;  --tab-botton-bg: #2c2c2c;  --tab-botton-color: rgba(255,255,255,0.7);  --tab-button-hover-bg: #383838;  --tab-button-active-bg: #121212;  --card-bg: #121212;  --sidebar-bg: #121212;  --btn-hover-color: #787878;  --btn-color: rgba(255,255,255,0.7);  --btn-bg: #1f1f1f;  --text-bg-hover: #383838;  --light-grey: rgba(255,255,255,0.7);  --dark-grey: rgba(255,255,255,0.2);  --white: rgba(255,255,255,0.9);  --text-highlight-color: rgba(255,255,255,0.9);  --blockquote-color: rgba(255,255,255,0.7);  --blockquote-bg: #2c2c2c;  --reward-pop: #2c2c2c;  --toc-link-color: rgba(255,255,255,0.6);  --hl-color: rgba(255,255,255,0.7);  --hl-bg: #171717;  --hltools-bg: #1a1a1a;  --hltools-color: #90a4ae;  --hlnumber-bg: #171717;  --hlnumber-color: rgba(255,255,255,0.4);  --hlscrollbar-bg: #1f1f1f;  --hlexpand-bg: linear-gradient(180deg, rgba(23,23,23,0.6), rgba(23,23,23,0.9)); --timeline-bg: #1f1f1f;}";switch(e){case 1:document.getElementById("themeColor").innerText=t;break;case 2:document.getElementById("themeColor").innerText=n;break;default:document.getElementById("themeColor").innerText=t+n}},setThemeColor:(e,t,n)=>{document.getElementById("themeColor").innerText=`:root{--theme-color:rgb(${e}, ${t}, ${n})!important;--btn-bg:rgb(${e}, ${t}, ${n})!important;--btn-hover-color:rgba(${e}, ${t}, ${n},0.7)!important;--text-bg-hover:rgba(${e}, ${t}, ${n},0.7)!important;--km-toc-active:rgba(${e}, ${t}, ${n},0.7)!important;--km-toc-hover:rgba(${e}, ${t}, ${n},0.6)!important;}`},toggleStarBackground:()=>{"true"==cloudchewieFn.loadData("enableStarBackground")?(cloudchewieFn.saveData("enableStarBackground","false"),$("#universe").hide()):(cloudchewieFn.saveData("enableStarBackground","true"),$("#universe").show())},changeAPlayerList:(e,t,n=!0)=>{if(window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].pause();cloudchewieFn.saveData("playlist",JSON.stringify({id:e,server:t})),$("meting-js").attr("id",e),$("meting-js").attr("server",t),n&&cloudchewieFn.changeMusicList(t,e)},toggleFullScreen:()=>{cloudchewieFn.isFullScreen()?(document.exitFullscreen(),$("#con-fullscreen").removeClass("checked")):(document.documentElement.requestFullscreen(),$("#con-fullscreen").addClass("checked"))},toggleAside:()=>{const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("enableAside","show",2):saveToLocal.set("enableAside","hide",2),e.toggle("hide-aside"),"hide"==cloudchewieFn.loadData("enableAside")?$("#con-toggleaside").addClass("checked"):$("#con-toggleaside").removeClass("checked")},switchAside:()=>{left?($("#aside-content").addClass("right"),$(".layout > div:first-child").addClass("left"),cloudchewieFn.saveData("isLeftAside","false")):($("aside-content").className="aside-content",$(".layout > div:first-child").className="",null!=$("#recent-posts")&&($("#recent-posts").className="recent-posts"),cloudchewieFn.saveData("isLeftAside","true")),left=!left},toggleRightSide:()=>{"true"==cloudchewieFn.loadData("enableRightSide")?(cloudchewieFn.saveData("enableRightSide","false"),$("#rightside").hide()):(cloudchewieFn.saveData("enableRightSide","true"),$("#rightside").show())},toggleAutoTheme:()=>{if("true"==cloudchewieFn.loadData("enableAutoTheme"))cloudchewieFn.saveData("enableAutoTheme","false"),$("#con-mode,.rightMenu-item:has(.fa-adjust)").show();else{cloudchewieFn.saveData("enableAutoTheme","true");var e=new Date;e.getHours()<=7||e.getHours()>=19?(activateDarkMode(),localStorage.removeItem("theme")):(activateLightMode(),localStorage.removeItem("theme")),$("#con-mode,.rightMenu-item:has(.fa-adjust)").hide()}},toggleFixedNav:()=>{"false"==cloudchewieFn.loadData("enableFixedNav")?(cloudchewieFn.saveData("enableFixedNav","true"),$("#page-header").addClass("nav-fixed nav-visible"),$("#name-container").show(),cloudchewieFn.fixNav()):(cloudchewieFn.saveData("enableFixedNav","false"),$("#page-header").removeClass("nav-fixed nav-visible"),$("#name-container").hide())},toggleAutoColor:()=>{"true"==cloudchewieFn.loadData("enableAutoColor")?cloudchewieFn.saveData("enableAutoColor","false"):cloudchewieFn.saveData("enableAutoColor","true"),consoleFn.changeAutoColor(!1)},toggleContextMenu:()=>{"true"==cloudchewieFn.loadData("enableContextMenu")?(cloudchewieFn.saveData("enableContextMenu","false"),$("#con-rightmouse").removeClass("checked"),cloudchewieFn.bindContextMenu(!1,!0)):(cloudchewieFn.saveData("enableContextMenu","true"),$("#con-rightmouse").addClass("checked"),cloudchewieFn.bindContextMenu(!0,!0))},toggleAPlayer:()=>{const e=$("#nav-music");if(null==e||null==e.find("meting-js"))return;const t=e.find("meting-js").aplayer;"true"==cloudchewieFn.loadData("enableAPlayer")?(cloudchewieFn.saveData("enableAPlayer","false"),e.hide(),$("#con-music").hide(),$("#menuMusic").hide(),$(".music-wrapper .aplayer").show(),t&&t.pause()):(cloudchewieFn.saveData("enableAPlayer","true"),$("#con-music").show(),$("#menuMusic").show(),cloudchewieFn.isMusic()?e.hide():e.show())},resolveUrl:()=>{var e,t,n=document.getElementById("url-input").value;if(""!=n){if(isNaN(n)||(e=n),-1!=n.indexOf("music.163.com/#/playlist?id="))e=n.split("id=")[1].replace("/",""),t="netease";else if(-1!=n.indexOf("y.qq.com/n/ryqq/playlist/"))e=n.split("playlist/")[1].replace("/",""),t="tencent";else if(-1!=n.indexOf("https://www.kugou.com/songlist/"))e=n.split("songlist/")[1].replace("/",""),t="kugou";else{if(-1==n.indexOf("https://music.91q.com/songlist/"))return $("#url-btn").html("解析失败"),$("#url-btn").removeClass("success"),void $("#url-btn").addClass("fail");e=n.split("songlist/")[1].replace("/",""),t="baidu"}var o="https://api.i-meto.com/meting/api?server="+t+"&type=playlist&id="+e,a=new XMLHttpRequest;a.onreadystatechange=()=>{4===a.readyState&&(a.status>=200&&a.status<300||304===a.status)&&(0!=JSON.parse(a.responseText).length?($("#url-btn").html("解析成功"),$("#url-btn").addClass("success"),$("#url-btn").removeClass("fail"),consoleFn.changeAPlayerList(e,t,!0)):($("#url-btn").html("解析失败"),$("#url-btn").removeClass("success"),$("#url-btn").addClass("fail")))},a.open("get",o,!0),a.send(null)}},changeAutoColor:async e=>{if("true"==cloudchewieFn.loadData("enableAutoColor")&&null!=document.querySelector("#page-header")&&null!=document.querySelector("#page-header").style.backgroundImage&&null!=document.querySelector("#page-header").style.backgroundImage.split('url("')[1]){var t=document.querySelector("#page-header").style.backgroundImage.split('url("')[1].split('")')[0];try{const e=await fetch(t+"?imageAve");if(e.ok){var n=(await e.json()).RGB.slice(2);consoleFn.setThemeColor(parseInt("0x"+n.slice(0,2)),parseInt("0x"+n.slice(2,4)),parseInt("0x"+n.slice(4,6)))}}catch(e){}}else e||consoleFn.setDefaultThemeColor(3)}};function runOne(){if("undefined"==typeof Lately){const e=document.createElement("script");e.src="https://npm.elemecdn.com/hexo-theme-cloudchewie@latest/source/js/third-party/lately.min.js",e.onload=()=>{Lately.init({target:".talk_date"})},document.head.appendChild(e)}else Lately.init({target:".talk_date"});document.getElementById("con-mode").addEventListener("click",(function(){setTimeout(cloudchewieFn.switchPostChart,100)})),document.onkeydown=function(e){(e=e||window.event).keyCode},navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)||cloudchewieFn.bindContextMenu(!0),cloudchewieFn.addLongtabListener(document.documentElement,(()=>cloudchewieFn.bindContextMenu(!0))),cloudchewieFn.resizeTop(),cloudchewieFn.categoriesBarActive(),cloudchewieFn.topCategoriesBarScroll()}